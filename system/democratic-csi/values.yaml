democratic-csi:
  csiDriver:
    # should be globally unique for a given cluster
    name: "org.democratic-csi.nfs"
  
  # add note here about volume expansion requirements
  storageClasses:
  - name: freenas-nfs-csi
    defaultClass: false
    reclaimPolicy: Delete
    volumeBindingMode: Immediate
    allowVolumeExpansion: true
    parameters:
      # for block-based storage can be ext3, ext4, xfs
      # for nfs should be nfs
      fsType: nfs
        
      # if true, volumes created from other snapshots will be
      # zfs send/received instead of zfs cloned
      # detachedVolumesFromSnapshots: "false"
      
      # if true, volumes created from other volumes will be
      # zfs send/received instead of zfs cloned
      # detachedVolumesFromVolumes: "false"
  
    mountOptions:
    - noatime
    - nfsvers=3
    secrets:
      provisioner-secret:
      controller-publish-secret:
      node-stage-secret:
      node-publish-secret:
      controller-expand-secret:
  
  # if your cluster supports snapshots you may enable below
  volumeSnapshotClasses: []
  #- name: freenas-nfs-csi
  #  parameters:
  #  # if true, snapshots will be created with zfs send/receive
  #  # detachedSnapshots: "false"
  #  secrets:
  #    snapshotter-secret:
  driver:
    config:
      driver: freenas-nfs
      instance_id:
      httpConnection:
        protocol: https
        host: truenas.tribz.cloud
        port: 443
        # use only 1 of apiKey or username/password
        # if both are present, apiKey is preferred
        # apiKey is only available starting in TrueNAS-12
        apiKey: 1-wJ3l6nblddL0nfdGlb0B1pbz817GHA5g0pHUaW5jocz7eTN2yX6olmciakKSfeEV
        username: root
        password:
        allowInsecure: true
        # use apiVersion 2 for TrueNAS-12 and up (will work on 11.x in some scenarios as well)
        # leave unset for auto-detection
        apiVersion: 2
      sshConnection:
        host: 192.168.1.3
        port: 22
        username: root
        # This is the SSH key that we generated for passwordless authentication
        privateKey: |
          -----BEGIN RSA PRIVATE KEY-----
          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
          -----END RSA PRIVATE KEY-----
      zfs:
        # can be used to override defaults if necessary
        # the example below is useful for TrueNAS 12
        #cli:
        #  sudoEnabled: true
        #
        #  leave paths unset for auto-detection
        #  paths:
        #    zfs: /usr/local/sbin/zfs
        #    zpool: /usr/local/sbin/zpool
        #    sudo: /usr/local/bin/sudo
        #    chroot: /usr/sbin/chroot
        
        # can be used to set arbitrary values on the dataset/zvol
        # can use handlebars templates with the parameters from the storage class/CO
        #datasetProperties:
        #  "org.freenas:description": "{{ parameters.[csi.storage.k8s.io/pvc/namespace] }}/{{ parameters.[csi.storage.k8s.io/pvc/name] }}"
        #  "org.freenas:test": "{{ parameters.foo }}"
        #  "org.freenas:test2": "some value"
      
        datasetParentName: tank/k8s/nfs/vols
        # do NOT make datasetParentName and detachedSnapshotsDatasetParentName overlap
        # they may be siblings, but neither should be nested in the other
        detachedSnapshotsDatasetParentName: tank/k8s/nfs/snaps
        datasetEnableQuotas: true
        datasetEnableReservation: false
        datasetPermissionsMode: "0777"
        datasetPermissionsUser: 0
        datasetPermissionsGroup: 0
      
        # not supported yet
        #datasetPermissionsAcls:
        #- "-m everyone@:full_set:allow"
        #- "-m u:kube:full_set:allow"
      
      nfs:
        #shareCommentTemplate: "{{ parameters.[csi.storage.k8s.io/pvc/namespace] }}-{{ parameters.[csi.storage.k8s.io/pvc/name] }}"
        shareHost: truenas.tribz.cloud
        shareAlldirs: false
        shareAllowedHosts: []
        shareAllowedNetworks: []
        shareMaprootUser: root
        shareMaprootGroup: root
        shareMapallUser: ""