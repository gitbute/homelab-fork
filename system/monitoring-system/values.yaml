# kube-prometheus-stack:
grafana:
  adminPassword: admin
  defaultDashboardsTimezone: Europe/Zurich
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      hajimari.io/appName: Grafana
      hajimari.io/icon: chart-bar
    hosts:
      - &host grafana.tribz.cloud
    tls:
      - secretName: grafana-general-tls
        hosts:
          - *host
  plugins:
    - grafana-worldmap-panel
  dashboardProviders:
    dashboardproviders.yaml:
      apiVersion: 1
      providers:
        - name: "default"
          orgId: 1
          folder: ""
          type: file
          disableDeletion: false
          editable: true
          options:
            path: /var/lib/grafana/dashboards/default
  dashboards:
    default:
      TrueNAS:
        json: |
          {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"TrueNAS/FreeNAS dashboard using InfluxDb with graphite endpoint as data source.  ","editable":true,"fiscalYearStartMonth":0,"gnetId":12921,"graphTooltip":0,"id":29,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","gridPos":{"h":3,"w":4,"x":0,"y":0},"id":21,"options":{"bgColor":"dark-purple","clockType":"12 hour","countdownSettings":{"endCountdownTime":"2020-08-29T01:16:48-04:00","endText":"00:00:00"},"dateSettings":{"dateFormat":"MMMM DD, YYYY","fontSize":"18px","fontWeight":"normal","showDate":true},"mode":"time","timeSettings":{"fontSize":"24px","fontWeight":"normal"},"timezone":"America/Toronto","timezoneSettings":{"fontSize":"12px","fontWeight":"normal","showTimezone":false,"zoneFormat":"offsetAbbv"}},"pluginVersion":"7.1.4","targets":[{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Toronto","type":"grafana-clock-panel"},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"dark-yellow","value":null}]},"unit":"dtdhms"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":4,"y":0},"id":8,"options":{"colorMode":"background","graphMode":"none","justifyMode":"center","orientation":"horizontal","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"value"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"}],"hide":false,"measurement":"uptime","orderByTime":"ASC","policy":"autogen","query":"SELECT last(\"value\") FROM \"uptime\" ","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"}]],"tags":[{"key":"host","operator":"=","value":"truenas_local"}]}],"title":"Uptime","type":"stat"},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fieldConfig":{"defaults":{"decimals":0,"mappings":[],"max":60,"min":30,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"dark-yellow","value":40},{"color":"dark-red","value":50}]},"unit":"celsius"},"overrides":[]},"gridPos":{"h":9,"w":9,"x":8,"y":0},"id":6,"interval":"","links":[],"maxDataPoints":70,"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.3.1","targets":[{"alias":"da1","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"da1","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"da2","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"da2","orderByTime":"ASC","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"da3","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"da3","orderByTime":"ASC","policy":"default","refId":"C","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"da4","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"da4","orderByTime":"ASC","policy":"default","refId":"D","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"da5","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"da5","orderByTime":"ASC","policy":"default","refId":"E","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"da6","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"da6","orderByTime":"ASC","policy":"default","refId":"F","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]}],"title":"Current Disk Temperature (°C)","transformations":[{"id":"filterFieldsByName","options":{"include":{"names":["da1","da2","da3","da4","da5","da6"]}}}],"type":"gauge"},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fieldConfig":{"defaults":{"decimals":2,"mappings":[],"thresholds":{"mode":"percentage","steps":[{"color":"semi-dark-red","value":null}]},"unit":"bits"},"overrides":[]},"gridPos":{"h":6,"w":7,"x":17,"y":0},"id":17,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"alias":"Media Pool","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"mnt-MediaPool","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"mnt-MediaPool_df_complex_used\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["df_complex.free"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"Personal","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"mnt-Personal","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"mnt-MediaPool_df_complex_used\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["df_complex.free"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"Personal Pool","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"mnt-PersonalPool","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"mnt-MediaPool_df_complex_used\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"C","resultFormat":"time_series","select":[[{"params":["df_complex.free"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"title":"Available Space","type":"stat"},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fieldConfig":{"defaults":{"decimals":3,"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":50},{"color":"dark-red","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":9,"w":2,"x":0,"y":3},"id":23,"links":[],"maxDataPoints":100,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"vertical","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"showUnfilled":false},"pluginVersion":"9.3.1","targets":[{"alias":"Idle","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"cpu-average","orderByTime":"ASC","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["percent.idle"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"Usage","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"cpu-average","orderByTime":"ASC","policy":"default","query":"SELECT last(\"percent.system\")+ last(\"percent.user\")+ last(\"percent.interrupt\") FROM \"cpu-average\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["percent.system"],"type":"field"},{"params":[],"type":"last"}],[{"params":["percent.user"],"type":"field"},{"params":[],"type":"last"}],[{"params":["percent.interrupt"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"title":"CPU","type":"bargauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"fill":1,"fillGradient":9,"gridPos":{"h":9,"w":6,"x":2,"y":3},"hiddenSeries":false,"id":13,"legend":{"alignAsTable":false,"avg":true,"current":false,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"alias":"Longterm","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"measurement":"load","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"vmx0_if_octets_rx\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["longterm"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"Midterm","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"load","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"vmx0_if_octets_rx\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["midterm"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"Shortterm","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"load","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"vmx0_if_octets_rx\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"C","resultFormat":"time_series","select":[[{"params":["shortterm"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"thresholds":[],"timeRegions":[],"title":"System Load","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"breakPoint":"50%","combine":{"label":"Others","threshold":0},"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"decimals":1,"description":"","fontSize":"100%","format":"bits","gridPos":{"h":7,"w":7,"x":17,"y":6},"id":12,"legend":{"percentage":false,"show":true,"sideWidth":0,"values":true},"legendType":"Right side","links":[],"nullPointMode":"connected","pieType":"donut","pluginVersion":"7.1.3","strokeWidth":"1","targets":[{"alias":"Free","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"memory","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"memory.free\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["free"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"memory"}]},{"alias":"ZFS Cache","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"cache_size","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"memory.active\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["arc"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"zfs_arc"}]},{"alias":"Services","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"cache_size","orderByTime":"ASC","policy":"default","query":"SELECT last(\"c\")+ last(\"p\")+ last(\"dbuf_size\")+ last(\"dnode_size\")+ last(\"hdr_size\")+ last(\"metadata_size\")+ last(\"mfu_ghost_size\")+ last(\"mfu_size\")+ last(\"mru_ghost_size\")+ last(\"mru_size\") FROM \"cache_size\" WHERE (\"resource\" = 'zfs_arc') AND $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"C","resultFormat":"time_series","select":[[{"params":["c"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"zfs_arc"}]}],"title":"Physical Memory Utilization","type":"grafana-piechart-panel","valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fill":1,"fillGradient":2,"gridPos":{"h":7,"w":9,"x":8,"y":9},"hiddenSeries":false,"id":19,"interval":"","legend":{"alignAsTable":false,"avg":false,"current":false,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"maxDataPoints":70,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":true,"pluginVersion":"9.3.1","pointradius":0.5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"da1","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"da1","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"da1.temperature\"","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"da2","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"da2","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"da1.temperature\"","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"da3","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"da3","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"da1.temperature\"","rawQuery":false,"refId":"C","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"da4","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"da4","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"da1.temperature\"","rawQuery":false,"refId":"D","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"da5","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"da5","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"da1.temperature\"","rawQuery":false,"refId":"E","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"da6","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"da6","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"da1.temperature\"","rawQuery":false,"refId":"F","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]}],"thresholds":[],"timeRegions":[],"title":"Disk Temperature","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"transformations":[{"id":"filterFieldsByName","options":{"include":{"names":["Time","da1","da2","da3","da4","da5","da6"]}}}],"type":"graph","xaxis":{"mode":"time","show":false,"values":[]},"yaxes":[{"format":"celsius","label":"Temperature (°C)","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"fill":2,"fillGradient":10,"gridPos":{"h":11,"w":8,"x":0,"y":12},"hiddenSeries":false,"id":25,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":false,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":0.5,"points":true,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"da1","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["da1"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"da2","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["da2"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"da3","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"C","resultFormat":"time_series","select":[[{"params":["da3"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"da4","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"D","resultFormat":"time_series","select":[[{"params":["da4"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"da5","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"E","resultFormat":"time_series","select":[[{"params":["da5"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"da6","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"F","resultFormat":"time_series","select":[[{"params":["da6"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"thresholds":[],"timeRegions":[],"title":"Disk Busy (%)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"filterFieldsByName","options":{}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"dark-red","value":null},{"color":"dark-green","value":80}]},"unit":"bits"},"overrides":[]},"gridPos":{"h":3,"w":7,"x":17,"y":13},"id":14,"links":[],"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["firstNotNull"],"fields":"","values":false},"showUnfilled":true},"pluginVersion":"9.3.1","targets":[{"alias":"Free","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"swap","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"memory-free\"\n\n","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["free"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"Used","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"swap","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"memory-free\"\n\n","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["used"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"title":"Swap Utilization","transformations":[{"id":"filterFieldsByName","options":{"include":{"names":["Free","Used","Time"]}}}],"type":"bargauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"fill":2,"fillGradient":4,"gridPos":{"h":7,"w":16,"x":8,"y":16},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":false,"avg":false,"current":false,"hideEmpty":false,"max":true,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"Rx","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"vmx0","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"vmx0_if_octets_rx\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["if_octets.rx"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"Tx","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"vmx0","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"vmx0_if_octets_rx\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["if_octets.tx"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeRegions":[],"title":"Interface Traffic","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bps","label":"","logBase":2,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"refresh":false,"schemaVersion":37,"style":"dark","tags":["TrueNAS","FreeNAS","InfluxDB","Graphite"],"templating":{"list":[]},"time":{"from":"now-12h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"TrueNAS","uid":"ruU9VdNMk","version":1,"weekStart":""}
      Longhorn:
        json: |
          {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"An example dashboard for Longhorn v1.1.0","editable":true,"fiscalYearStartMonth":0,"gnetId":13032,"graphTooltip":0,"id":30,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":3,"w":24,"x":0,"y":0},"id":4,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"<div class=\"dashboard-header text-center\">\n<span>VOLUMES</span>\n</div>","mode":"html"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"The total number of volumes in the Longhorn storage system","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":0,"y":3},"id":8,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_capacity_bytes) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Total Number Of Volumes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Healthy volumes are volumes that are attaching to a node and have the number of healthy replicas equals to the expected number of replicas.","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"green","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":4,"y":3},"id":13,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_robustness==1) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Healthy Volumes","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Note that Longhorn volume actual size is not the size of the filesystem inside a Longhorn volume.  See more at : https://longhorn.io/docs/1.0.2/volumes-and-nodes/volume-size/#volume-actual-size","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":15,"x":9,"y":3},"hiddenSeries":false,"id":12,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"( (avg by (volume) (longhorn_volume_actual_size_bytes))/ (avg by (volume) (longhorn_volume_capacity_bytes)) ) *100","interval":"","legendFormat":"{{volume}}","refId":"A"}],"thresholds":[{"$$hashKey":"object:649","colorMode":"critical","fill":true,"line":true,"op":"gt","value":90,"yaxis":"left"}],"timeRegions":[],"title":"Volume Actual Size/Capacity","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:476","format":"percent","logBase":1,"show":true},{"$$hashKey":"object:477","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Degraded volumes are volumes that have the number of healthy replicas smaller than the expected number of replicas. e.g. User creates a volume with 2 replicas but 1 replicas is failed.","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"orange","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":0,"y":9},"id":15,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_robustness==2) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Degraded Volumes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Fault volumes are volumes that doesn't have any healthy replica.","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":4,"y":9},"id":16,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_robustness==3) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Fault Volumes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"The capacity of each Longhorn volume","fieldConfig":{"defaults":{"custom":{"displayMode":"auto","inspect":false},"decimals":1,"mappings":[{"options":{"":{"text":""}},"type":"value"}],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[{"matcher":{"id":"byName","options":"volume"},"properties":[{"id":"custom.displayMode","value":"auto"}]},{"matcher":{"id":"byName","options":"Capacity"},"properties":[{"id":"custom.displayMode","value":"lcd-gauge"}]}]},"gridPos":{"h":9,"w":15,"x":9,"y":12},"id":10,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":4,"showHeader":true,"sortBy":[{"desc":true,"displayName":"Capacity"}]},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"avg by (volume) (longhorn_volume_capacity_bytes)","format":"table","instant":true,"interval":"","intervalFactor":1,"legendFormat":"{{volume}}","refId":"A"}],"title":"Volume Capacity","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{},"renameByName":{"Value":"Capacity"}}}],"type":"table"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Attached volumes are volumes that are currently attaching to a node","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"green","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":0,"y":15},"id":34,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_state==2) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Attached Volumes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Detached volumes are volumes that aren't currently attaching to a node","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":4,"y":15},"id":14,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_state==3) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Detached Volumes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":3,"w":24,"x":0,"y":21},"id":6,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"<div class=\"dashboard-header text-center\">\n<span>NODES</span>\n</div>","mode":"html"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"The total number of nodes in the Longhorn storage system","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":0,"y":24},"id":18,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"avg(longhorn_node_count_total) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Total Number Of Nodes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Disabled nodes are nodes that are disabled by the user.  When users disable a node, Longhorn will not use the node's storage for replica scheduling. Note that Longhorn can still attach a volume to disabled nodes because the actual data of the volume could be on a different node.","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":4,"y":24},"id":21,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_node_status{condition=\"allowScheduling\"}==0) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Disabled Nodes","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fill":1,"fillGradient":0,"gridPos":{"h":10,"w":15,"x":9,"y":24},"hiddenSeries":false,"id":24,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(longhorn_node_storage_usage_bytes/longhorn_node_storage_capacity_bytes) * 100","interval":"","legendFormat":"{{node}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Node Storage Usage/Capacity","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:530","format":"percent","logBase":1,"show":true},{"$$hashKey":"object:531","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Schedulable nodes are nodes that Longhorn can use their storage for replica scheduling.","fieldConfig":{"defaults":{"custom":{},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"red"},{"color":"green","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":0,"y":30},"id":20,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.1.5","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(count(longhorn_node_status{condition=\"schedulable\"}==1) OR on() vector(0)) - (count(longhorn_node_status{condition=\"allowScheduling\"}==0) OR on() vector(0))","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Schedulable Nodes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Failed Nodes are nodes that Longhorn cannot attach volumes to and cannot schedule replicas onto. e.g: when the nodes went down.","fieldConfig":{"defaults":{"custom":{},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":4,"y":30},"id":22,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.1.5","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(avg(longhorn_node_count_total) OR on() vector(0)) - (count(longhorn_node_status{condition=\"ready\"}==1) OR on() vector(0))","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Failed Nodes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"custom":{},"decimals":1,"mappings":[],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"bytes"},"overrides":[{"matcher":{"id":"byName","options":"Storage Capacity"},"properties":[{"id":"custom.displayMode","value":"lcd-gauge"}]}]},"gridPos":{"h":10,"w":15,"x":9,"y":34},"id":23,"options":{"showHeader":true},"pluginVersion":"7.1.5","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_node_storage_capacity_bytes","format":"table","instant":true,"interval":"","legendFormat":"{{node}}","refId":"A"}],"title":"Node Capacity","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"__name__":true,"endpoint":true,"instance":true,"job":true,"namespace":true,"pod":true,"service":true},"indexByName":{},"renameByName":{"Value":"Storage Capacity"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":0,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":0,"y":36},"hiddenSeries":false,"id":26,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count by (node) (longhorn_volume_state==2)","interval":"","legendFormat":"{{node}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Number of Volumes Per Node","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:422","decimals":0,"format":"short","logBase":1,"show":true},{"$$hashKey":"object:423","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":3,"w":24,"x":0,"y":44},"id":17,"options":{"content":"<div class=\"dashboard-header text-center\">\n<span>DISKS</span>\n</div>","mode":"html"},"pluginVersion":"7.1.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"transparent":true,"type":"text"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"The capacity of each Longhorn volume","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":12,"x":0,"y":47},"hiddenSeries":false,"id":32,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(longhorn_disk_usage_bytes/longhorn_disk_capacity_bytes)*100","interval":"","legendFormat":"{{disk}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Disk Space Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:530","format":"percent","logBase":1,"show":true},{"$$hashKey":"object:531","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"custom":{},"decimals":1,"mappings":[],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"bytes"},"overrides":[{"matcher":{"id":"byName","options":"Capacity"},"properties":[{"id":"custom.displayMode","value":"lcd-gauge"}]}]},"gridPos":{"h":10,"w":12,"x":12,"y":47},"id":33,"options":{"showHeader":true},"pluginVersion":"7.1.5","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_disk_capacity_bytes","format":"table","instant":true,"interval":"","legendFormat":"{{disk}}","refId":"A"}],"title":"Disk Capacity","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":false,"__name__":true,"disk":false,"endpoint":true,"instance":true,"job":true,"namespace":true,"pod":true,"service":true},"indexByName":{},"renameByName":{"Value":"Capacity"}}}],"type":"table"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":3,"w":24,"x":0,"y":57},"id":5,"options":{"content":"<div class=\"dashboard-header text-center\">\n<span>CPU & MEMORY</span>\n</div>","mode":"html"},"pluginVersion":"7.1.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"transparent":true,"type":"text"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":12,"x":0,"y":60},"hiddenSeries":false,"id":36,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(longhorn_node_cpu_usage_millicpu / longhorn_node_cpu_capacity_millicpu) * 100","interval":"","legendFormat":"{{node}}","refId":"A"}],"thresholds":[{"$$hashKey":"object:1092","colorMode":"critical","fill":true,"line":true,"op":"gt","value":80,"yaxis":"left"}],"timeRegions":[],"title":"Node CPU Usage/Capacity","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:865","decimals":0,"format":"percent","logBase":1,"show":true},{"$$hashKey":"object:866","format":"none","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":12,"x":12,"y":60},"hiddenSeries":false,"id":38,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"( longhorn_node_memory_usage_bytes / longhorn_node_memory_capacity_bytes ) * 100","interval":"","legendFormat":"{{node}}","refId":"A"}],"thresholds":[{"$$hashKey":"object:1092","colorMode":"critical","fill":true,"line":true,"op":"gt","value":80,"yaxis":"left"}],"timeRegions":[],"title":"Node Memory Usage/Capacity","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:865","decimals":0,"format":"percent","logBase":1,"show":true},{"$$hashKey":"object:866","format":"none","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":0,"description":"Instance managers are pods that contains the engine and replica processes of Longhorn volumes. See more at https://longhorn.io/docs/1.0.2/concepts/#11-the-longhorn-manager-and-the-longhorn-engine ","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":8,"x":0,"y":70},"hiddenSeries":false,"id":28,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_instance_manager_cpu_usage_millicpu","interval":"","legendFormat":"{{instance_manager}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Instance Manager CPU Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:865","decimals":0,"format":"milicpu","logBase":1,"show":true},{"$$hashKey":"object:866","format":"none","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Instance managers are pods that contains the engine and replica processes of Longhorn volumes. See more at https://longhorn.io/docs/1.0.2/concepts/#11-the-longhorn-manager-and-the-longhorn-engine ","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":8,"x":8,"y":70},"hiddenSeries":false,"id":30,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(longhorn_instance_manager_cpu_usage_millicpu/longhorn_instance_manager_cpu_requests_millicpu)*100","interval":"","legendFormat":"{{instance_manager}}","refId":"A"}],"thresholds":[{"$$hashKey":"object:1092","colorMode":"critical","fill":true,"line":true,"op":"gt","value":100,"yaxis":"left"}],"timeRegions":[],"title":"Instance Manager CPU Usage/Request","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:865","decimals":0,"format":"percent","logBase":1,"show":true},{"$$hashKey":"object:866","format":"none","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Instance managers are pods that contains the engine and replica processes of Longhorn volumes. See more at https://longhorn.io/docs/1.0.2/concepts/#11-the-longhorn-manager-and-the-longhorn-engine ","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":8,"x":16,"y":70},"hiddenSeries":false,"id":29,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_instance_manager_memory_usage_bytes","interval":"","legendFormat":"{{instance_manager}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Instance Manager Memory Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:865","format":"bytes","logBase":1,"show":true},{"$$hashKey":"object:866","format":"none","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":0,"description":"Longhorn manager pods manage the control plane of the Longhorn system. e.g. Volume scheduling, attaching, detaching, backup, etc,..","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":80},"hiddenSeries":false,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_manager_cpu_usage_millicpu","interval":"","legendFormat":"{{manager}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Longhorn Manager CPU Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1500","decimals":0,"format":"milicpu","logBase":1,"show":true},{"$$hashKey":"object:1501","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Longhorn manager pods manage the control plane of the Longhorn system. e.g. Volume scheduling, attaching, detaching, backup, etc,..","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":80},"hiddenSeries":false,"id":31,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_manager_memory_usage_bytes","interval":"","legendFormat":"{{manager}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Longhorn Manager Memory Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1500","format":"bytes","logBase":1,"show":true},{"$$hashKey":"object:1501","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"refresh":"30s","schemaVersion":37,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"Longhorn","uid":"2BCgsldGz","version":1,"weekStart":""}
      OPNsense:
        json: |
          {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":2,"iteration":1645431848722,"links":[],"liveNow":true,"panels":[{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":22,"panels":[],"title":"Hardware","type":"row"},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":2,"x":0,"y":1},"id":20,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.3.3","targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -20s)\r\n  |> filter(fn: (r) =>\r\n    r._measurement == \"system\" and\r\n    r._field == \"n_users\"\r\n  )\r\n  |> keep(columns: [\"_value\"])\r\n  |> last()","refId":"A"}],"title":"Active Users","type":"stat"},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"displayName":"CPU","mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":70},{"color":"red","value":85}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":6,"w":3,"x":2,"y":1},"id":4,"maxDataPoints":9000,"options":{"orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.3.3","targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -20s)\r\n  |> filter(fn: (r) =>\r\n    r._measurement == \"cpu\" and\r\n    r._field == \"usage_idle\" and\r\n    r.cpu == \"cpu-total\"\r\n  )\r\n  |> map(fn: (r) => ({\r\n        r with\r\n        _value: r._value * -1.0 + 100.0\r\n      })\r\n    )\r\n  |> keep(columns: [\"_value\"])\r\n  |> last()","refId":"A"}],"title":"CPU Total","type":"gauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":6,"x":5,"y":1},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"cpu\" and\r\n    r._field == \"usage_idle\")\r\n  |> map(fn: (r) => ({\r\n        r with\r\n        _value: r._value * -1.0 + 100.0\r\n      })\r\n    )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> drop(columns: [\"host\"])","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"CPU","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"transformations":[{"id":"labelsToFields","options":{"valueLabel":"cpu"}},{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{"cpu-total":true},"indexByName":{},"renameByName":{}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:39","decimals":0,"format":"percent","logBase":1,"max":"100","min":"0","show":true},{"$$hashKey":"object:40","decimals":2,"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"auto","filterable":false,"minWidth":1},"decimals":0,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":7,"x":11,"y":1},"id":8,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":0,"showHeader":true,"sortBy":[]},"pluginVersion":"8.3.3","targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"processes\" and\r\n    r._field =~ /running|idle|sleeping|wait|blocked|zombies/\r\n  )\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  |> last()","refId":"A"}],"title":"Process Information","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"filterFieldsByName","options":{"include":{"pattern":"/blocked|idle|running|sleeping|wait|zombies/"}}},{"id":"organize","options":{"excludeByName":{},"indexByName":{"blocked":4,"idle":1,"running":0,"sleeping":2,"wait":3,"zombies":5},"renameByName":{"blocked":"Blocked","idle":"Idle","running":"Running","sleeping":"Sleeping","wait":"Wait","zombies":"Zombies"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":6,"x":18,"y":1},"hiddenSeries":false,"id":10,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"system\" and\r\n    r._field =~ /load1|load5|load15/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Load","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:112","decimals":1,"format":"none","logBase":1,"show":true},{"$$hashKey":"object:113","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":3,"w":2,"x":0,"y":4},"id":6,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"/.*/","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.3.3","targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -20s)\r\n  |> filter(fn: (r) =>\r\n    r._measurement == \"system\" and\r\n    r._field == \"uptime_format\"\r\n  )\r\n  |> keep(columns: [\"_value\"])\r\n  |> last()\r\n","refId":"A"}],"title":"Uptime","type":"stat"},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"auto","minWidth":1},"decimals":1,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"locale"},"overrides":[]},"gridPos":{"h":3,"w":7,"x":11,"y":4},"id":16,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"showHeader":true},"pluginVersion":"8.3.3","targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"pf\" and\r\n    r._field =~ /match|state-mismatch|state-insert/\r\n  )\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  |> last()","refId":"A"}],"title":"PF Information","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{"Time":false},"indexByName":{},"renameByName":{"Time":"","match":"Match","state-insert":"State Insert","state-mismatch":"State Mismatch"}}},{"id":"filterFieldsByName","options":{"include":{"pattern":"/Match|State Insert|State Mismatch/"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"decimals":2,"fieldConfig":{"defaults":{"unit":"percent"},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":5,"w":7,"x":0,"y":7},"hiddenSeries":false,"id":12,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"hide":false,"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.device != \"devfs\" and\r\n    r.device =~ /^${Disk:regex}$/ and\r\n    r._measurement == \"disk\" and\r\n    r._field == \"used_percent\"\r\n  )","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Disk Utilization","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"labelsToFields","options":{"valueLabel":"path"}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:206","format":"percent","logBase":1,"max":"100","min":"0","show":true},{"$$hashKey":"object:207","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"unit":"percent"},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":5,"w":9,"x":7,"y":7},"hiddenSeries":false,"id":14,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"mem\" and\r\n    r._field == \"used_percent\"\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  ","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Ram","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"used_percent":"Ram Used"}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:416","format":"percent","logBase":1,"max":"100","min":"0","show":true},{"$$hashKey":"object:417","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fill":1,"fillGradient":0,"gridPos":{"h":5,"w":8,"x":16,"y":7},"hiddenSeries":false,"id":18,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.sensor =~ /^${Sensor:regex}$/ and\r\n    r._measurement == \"temperature\" and\r\n    r._field == \"degrees\"\r\n  )\r\n  |> aggregateWindow(every:10s, fn: last)","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Temperature Sensors","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"labelsToFields","options":{"valueLabel":"sensor"}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:33","format":"celsius","logBase":1,"show":true},{"$$hashKey":"object:34","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":12},"id":55,"panels":[],"title":"Firewall","type":"row"},{"datasource":{"uid":"${ESdataSource}"},"fieldConfig":{"defaults":{"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":0,"y":13},"id":111,"links":[],"options":{"colorMode":"value","fieldOptions":{"calcs":["sum"]},"graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.3.3","targets":[{"bucketAggs":[{"$$hashKey":"object:14","field":"timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"metrics":[{"$$hashKey":"object:12","field":"select field","id":"1","type":"count"}],"query":"interface:$iface AND src_ip:$src_ip AND dst_port:$dst_port AND action:\"block\"","refId":"A","target":"","timeField":"timestamp"}],"title":"Firewall Blocked Events on $iface","type":"stat"},{"circleMaxSize":"","circleMinSize":"","colors":["#37872D","#E0B400","#C4162A","#8F3BB8"],"datasource":{"uid":"${ESdataSource}"},"decimals":0,"esGeoPoint":"src_location","esLocationName":"src_ip","esMetric":"Count","gridPos":{"h":11,"w":13,"x":6,"y":13},"height":"","hideEmpty":false,"hideZero":false,"id":59,"initialZoom":"1","links":[],"locationData":"countries","mapCenter":"(0°, 0°)","mapCenterLatitude":0,"mapCenterLongitude":0,"maxDataPoints":1,"mouseWheelZoom":false,"showLegend":true,"stickyLabels":false,"tableQueryOptions":{"geohashField":"geohash","latitudeField":"latitude","longitudeField":"longitude","metricField":"metric","queryType":"geohash"},"targets":[{"alias":"","bucketAggs":[{"$$hashKey":"object:974","fake":true,"field":"src_ip_country_code","id":"3","settings":{"min_doc_count":1,"order":"asc","orderBy":"_count","size":"0"},"type":"terms"},{"$$hashKey":"object:975","field":"timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"dsType":"elasticsearch","metrics":[{"$$hashKey":"object:972","field":"select field","id":"1","type":"count"}],"query":"interface:$iface AND src_ip:$src_ip AND action:\"block\"","refId":"A","timeField":"timestamp"}],"thresholds":"10,100,500","title":"Firewall Blocked Event Locations on $iface","type":"grafana-worldmap-panel","unitPlural":"","unitSingle":"","valueName":"total"},{"datasource":{"uid":"${ESdataSource}"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":5,"x":19,"y":13},"id":67,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","fieldOptions":{"calcs":["first"]},"graphMode":"none","justifyMode":"center","orientation":"horizontal","reduceOptions":{"calcs":["first"],"fields":"/^src_ip$/","values":true},"text":{},"textMode":"value"},"pluginVersion":"8.3.3","targets":[{"bucketAggs":[{"$$hashKey":"object:120","fake":true,"field":"src_ip","id":"3","settings":{"min_doc_count":1,"order":"desc","orderBy":"_count","size":"1"},"type":"terms"}],"dsType":"elasticsearch","metrics":[{"$$hashKey":"object:118","field":"select field","id":"1","type":"count"}],"query":"action:\"block\" AND interface:$iface AND src_ip:$src_ip AND dst_port:$dst_port","refId":"A","target":"","timeField":"timestamp"}],"title":"Top IP Blocked on $iface","transformations":[],"type":"stat"},{"datasource":{"uid":"${ESdataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"decimals":0,"mappings":[],"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":6,"x":0,"y":16},"id":61,"links":[],"maxDataPoints":1,"options":{"legend":{"calcs":[],"displayMode":"table","placement":"right","values":["value"]},"pieType":"pie","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"tooltip":{"mode":"single"}},"targets":[{"alias":"","bucketAggs":[{"$$hashKey":"object:1775","fake":true,"field":"dst_port","id":"3","settings":{"min_doc_count":1,"order":"desc","orderBy":"_count","size":"5"},"type":"terms"},{"$$hashKey":"object:1776","field":"timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"dsType":"elasticsearch","metrics":[{"$$hashKey":"object:1773","field":"select field","id":"1","type":"count"}],"query":"interface:$iface AND src_ip:$src_ip AND dst_port:$dst_port AND action:\"block\"","refId":"A","target":"","timeField":"timestamp"}],"title":"Firewall Blocked Destination Ports on $iface","type":"piechart"},{"datasource":{"type":"elasticsearch","uid":"${ESdataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"decimals":0,"mappings":[],"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":5,"x":19,"y":16},"id":65,"links":[],"maxDataPoints":1,"options":{"legend":{"calcs":[],"displayMode":"table","placement":"right","values":["value"]},"pieType":"pie","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"tooltip":{"mode":"single"}},"targets":[{"bucketAggs":[{"$$hashKey":"object:1049","fake":true,"field":"protocol_name","id":"3","settings":{"min_doc_count":1,"order":"desc","orderBy":"_term","size":"0"},"type":"terms"},{"$$hashKey":"object:1050","field":"timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"datasource":{"type":"elasticsearch","uid":"${ESdataSource}"},"dsType":"elasticsearch","metrics":[{"$$hashKey":"object:1047","field":"select field","id":"1","type":"count"}],"query":"interface:$iface AND src_ip:$src_ip AND action:\"block\"","refId":"A","timeField":"timestamp"}],"title":"Firewall Blocked Protocols on $iface","type":"piechart"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":24},"id":24,"panels":[],"title":"Network Stats","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":0,"y":25},"hiddenSeries":false,"id":26,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.gateway_name =~ /^${Gateway:regex}$/ and\r\n    r._measurement == \"gateways\" and\r\n    r._field == \"delay\"\r\n  )","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Gateway RTT - $Gateway ","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"labelsToFields","options":{"valueLabel":"gateway_name"}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:164","format":"ms","logBase":10,"show":true},{"$$hashKey":"object:165","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"influxdb","uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"color-text","filterable":true,"minWidth":1},"mappings":[{"options":{"0":{"index":2,"text":"DOWN"},"1":{"index":1,"text":"UP"},"2":{"index":0,"text":"UNKNOWN"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"#ffffff","value":null}]}},"overrides":[{"matcher":{"id":"byName","options":"Status"},"properties":[{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"transparent","value":null},{"color":"red","value":0},{"color":"green","value":1},{"color":"orange","value":2}]}}]}]},"gridPos":{"h":10,"w":16,"x":8,"y":25},"id":32,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":0,"showHeader":true,"sortBy":[]},"pluginVersion":"8.3.3","targets":[{"datasource":{"type":"influxdb","uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"interface\"\r\n  )\r\n  |> last()\r\n  |> group()\r\n  |> keep(columns: [\"friendlyname\", \"ip4_address\", \"ip4_subnet\", \"mac_address\", \"name\", \"_value\"])\r\n  |> sort(columns:[\"name\"])","refId":"A"}],"title":"Interface Summary","transformations":[{"id":"organize","options":{"excludeByName":{},"indexByName":{"_value":5,"friendlyname":1,"ip4_address":2,"ip4_subnet":3,"mac_address":4,"name":0},"renameByName":{"_value":"Status","friendlyname":"Friendly Name","ip4_address":"IPv4 Address","ip4_subnet":"Subnet","mac_address":"Physical Address","name":"Interface"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":0,"y":33},"hiddenSeries":false,"id":38,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.gateway_name =~ /^${Gateway:regex}$/ and\r\n    r._measurement == \"gateways\" and\r\n    r._field == \"loss\"\r\n  )","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Gateway Loss - $Gateway ","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"labelsToFields","options":{"valueLabel":"gateway_name"}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:97","decimals":0,"format":"percent","logBase":1,"max":"100","min":"0","show":true},{"$$hashKey":"object:98","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"influxdb","uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"color-text","filterable":true,"minWidth":1},"mappings":[{"options":{"0":{"color":"red","index":0,"text":"OFFLINE"},"1":{"color":"green","index":1,"text":"ONLINE"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"#ffffff","value":null}]}},"overrides":[]},"gridPos":{"h":6,"w":16,"x":8,"y":35},"id":46,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":3,"showHeader":true,"sortBy":[{"desc":false}]},"pluginVersion":"8.3.3","targets":[{"datasource":{"type":"influxdb","uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) =>\r\n    r._measurement == \"gateways\" and\r\n    r._field =~ /gwdescr|source|monitor|status|gateway_name|interface/\r\n    )\r\n  |> last()\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"title":"Gateway Summary - $Gateway","transformations":[{"id":"filterFieldsByName","options":{"include":{"names":["gwdescr","monitor","source","status"]}}},{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"gwdescr":"Gateway Description","monitor":"Monitor IP","source":"Source IP","status":"Status"}}}],"type":"table"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":41},"id":30,"panels":[],"repeat":"WAN","title":"WAN Interface - $WAN","type":"row"},{"datasource":{"type":"influxdb","uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"color-text","filterable":true,"minWidth":1},"mappings":[{"options":{"0":{"index":2,"text":"DOWN"},"1":{"index":1,"text":"UP"},"2":{"index":0,"text":"UNKNOWN"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"#fffffffc","value":null},{"color":"red","value":0},{"color":"green","value":1},{"color":"orange","value":2}]}},"overrides":[]},"gridPos":{"h":3,"w":24,"x":0,"y":42},"id":28,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":7,"showHeader":true,"sortBy":[]},"pluginVersion":"8.3.3","targets":[{"datasource":{"type":"influxdb","uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.name =~ /^${WAN:regex}$/ and\r\n    r._measurement == \"interface\" and\r\n    r._field == \"status\")\r\n  |> group()\r\n  |> last()\r\n  |> keep(columns: [\"friendlyname\", \"ip4_address\", \"name\", \"ip4_subnet\" \"mac_address\", \"_value\"])","refId":"A"}],"title":"Interface Summary","transformations":[{"id":"organize","options":{"excludeByName":{},"indexByName":{"_value":5,"friendlyname":1,"ip4_address":2,"ip4_subnet":3,"mac_address":4,"name":0},"renameByName":{"_value":"Status","friendlyname":"Friendly Name","ip4_address":"IPV4 Address","ip4_subnet":"Subnet","mac_address":"Physical Address","name":"Interface"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"decimals":2,"description":"","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":6,"x":0,"y":45},"hiddenSeries":false,"id":34,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${WAN:regex}$/ and \r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: r._value * 8.0\r\n    })\r\n  )\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"WAN Traffic - Bits/sec","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"Time":"","bytes_recv":"Bits Recv","bytes_sent":"Bits Sent"}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:63","decimals":2,"format":"bps","logBase":2,"show":true},{"$$hashKey":"object:64","decimals":2,"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bps"},"overrides":[]},"gridPos":{"h":7,"w":5,"x":6,"y":45},"id":36,"maxDataPoints":9000,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.3.3","targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${WAN:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: r._value * 8.0\r\n    })\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  |> last()","refId":"A"}],"title":"WAN Traffic - Bits/sec","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{},"renameByName":{"bytes_recv":"Bits Recv","bytes_sent":"Bits Sent"}}}],"type":"stat"},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":7,"w":5,"x":11,"y":45},"hideTimeOverride":true,"id":40,"maxDataPoints":9000,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.3.3","targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30d)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${WAN:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> aggregateWindow(every: 1h, fn: last)\r\n  |> difference(nonNegative: true)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"timeFrom":"now/M","title":"WAN - Bandwidth","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"bytes_recv":"Bytes Recv - This Month","bytes_sent":"Bytes Sent - This Month"}}}],"type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"unit":"short"},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":16,"y":45},"hiddenSeries":false,"id":42,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.interface =~ /^${WAN:regex}$/ and \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /packets_recv|packets_sent/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"WAN - Throughput","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"packets_recv":"Packets Recv","packets_sent":"Packets Sent"}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:191","decimals":2,"format":"short","logBase":2,"show":true},{"$$hashKey":"object:192","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":52},"id":48,"panels":[],"repeat":"LAN","title":"LAN Interface  - $LAN","type":"row"},{"datasource":{"type":"influxdb","uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"color-text","filterable":true,"minWidth":1},"mappings":[{"options":{"0":{"index":2,"text":"DOWN"},"1":{"index":1,"text":"UP"},"2":{"index":0,"text":"UNKNOWN"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"#fffffffc","value":null},{"color":"red","value":0},{"color":"green","value":1},{"color":"orange","value":2}]}},"overrides":[]},"gridPos":{"h":3,"w":24,"x":0,"y":53},"id":52,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":7,"showHeader":true},"pluginVersion":"8.3.3","targets":[{"datasource":{"type":"influxdb","uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.name =~ /^${LAN:regex}$/ and\r\n    r._measurement == \"interface\" and\r\n    r._field == \"status\")\r\n  |> group()\r\n  |> last()\r\n  |> keep(columns: [\"friendlyname\", \"ip4_address\", \"name\", \"ip4_subnet\" \"mac_address\", \"_value\"])","refId":"A"}],"title":"Interface Summary","transformations":[{"id":"organize","options":{"excludeByName":{},"indexByName":{"_value":5,"friendlyname":1,"ip4_address":2,"ip4_subnet":3,"mac_address":4,"name":0},"renameByName":{"_value":"Status","friendlyname":"Friendly Name","ip4_address":"IPV4 Address","ip4_subnet":"Subnet","mac_address":"Physical Address","name":"Interface"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"decimals":2,"description":"","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":6,"x":0,"y":56},"hiddenSeries":false,"id":49,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${LAN:regex}$/ and \r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: r._value * 8.0\r\n    })\r\n  )\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"${LAN} Traffic - Bits/sec","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"bytes_recv":"Bits Recv","bytes_sent":"Bits Sent"}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:63","decimals":2,"format":"bps","logBase":2,"show":true},{"$$hashKey":"object:64","decimals":2,"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bps"},"overrides":[]},"gridPos":{"h":7,"w":5,"x":6,"y":56},"id":51,"maxDataPoints":9000,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.3.3","targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -1m)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${LAN:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: r._value * 8.0\r\n    })\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  |> last()","refId":"A"}],"title":"${LAN} Traffic - Bits/sec","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{"Time":0,"bytes_recv":1,"bytes_sent":2},"renameByName":{"bytes_recv":"Bits Recv","bytes_sent":"Bits Sent"}}}],"type":"stat"},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":7,"w":5,"x":11,"y":56},"hideTimeOverride":true,"id":50,"maxDataPoints":9000,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.3.3","targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30d)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${LAN:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> aggregateWindow(every: 1h, fn: last)\r\n  |> difference(nonNegative: true)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"timeFrom":"now/M","title":"${LAN} - Bandwidth","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{"Time":0,"bytes_recv":2,"bytes_sent":1},"renameByName":{"bytes_recv":"Bytes Recv - This Month","bytes_sent":"Bytes Sent - This Month"}}}],"type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"decimals":2,"fieldConfig":{"defaults":{"unit":"short"},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":16,"y":56},"hiddenSeries":false,"id":53,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideZero":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.interface =~ /^${LAN:regex}$/ and \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /packets_recv|packets_sent/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"${LAN} - Throughput","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"packets_recv":"Packets Recv","packets_sent":"Packets Sent"}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:176","decimals":2,"format":"short","logBase":2,"show":true},{"$$hashKey":"object:177","decimals":2,"format":"short","label":"","logBase":1,"show":true}],"yaxis":{"align":false}}],"refresh":"10s","schemaVersion":34,"style":"dark","tags":["OPNsense","telegraf"],"templating":{"list":[{"current":{"selected":false,"text":"InfluxDB","value":"InfluxDB"},"hide":0,"includeAll":false,"label":"InfluxDB","multi":false,"name":"dataSource","options":[],"query":"influxdb","queryValue":"","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"current":{"selected":false,"text":"Elasticsearch","value":"Elasticsearch"},"hide":0,"includeAll":false,"label":"ElasticSearch","multi":false,"name":"ESdataSource","options":[],"query":"elasticsearch","queryValue":"","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"pf\")\r\n|> keyValues(keyColumns: [\"host\"])\r\n|> group()\r\n|> keep(columns: [\"host\"])\r\n|> distinct(column: \"host\")","hide":0,"includeAll":true,"label":"OPNsense","multi":true,"name":"Host","options":[],"query":"from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"pf\")\r\n|> keyValues(keyColumns: [\"host\"])\r\n|> group()\r\n|> keep(columns: [\"host\"])\r\n|> distinct(column: \"host\")","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn:(r) => r._measurement == \"disk\" and\r\n  r.host =~ /^${Host:regex}$/)\r\n  |> keyValues(keyColumns: [\"device\"])\r\n  |> group()\r\n  |> keep(columns: [\"device\"])\r\n  |> distinct(column: \"device\")","hide":0,"includeAll":true,"multi":false,"name":"Disk","options":[],"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn:(r) => r._measurement == \"disk\" and\r\n  r.host =~ /^${Host:regex}$/)\r\n  |> keyValues(keyColumns: [\"device\"])\r\n  |> group()\r\n  |> keep(columns: [\"device\"])\r\n  |> distinct(column: \"device\")","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn:(r) => r._measurement == \"temperature\" and\r\n    r.host =~ /^${Host:regex}$/)\r\n  |> keyValues(keyColumns: [\"sensor\"])\r\n  |> group()\r\n  |> keep(columns: [\"sensor\"])\r\n  |> distinct(column: \"sensor\")","hide":0,"includeAll":true,"multi":false,"name":"Sensor","options":[],"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn:(r) => r._measurement == \"temperature\" and\r\n    r.host =~ /^${Host:regex}$/)\r\n  |> keyValues(keyColumns: [\"sensor\"])\r\n  |> group()\r\n  |> keep(columns: [\"sensor\"])\r\n  |> distinct(column: \"sensor\")","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => \r\n    r._measurement == \"interface\"\r\n  )\r\n  |> keyValues(keyColumns: [\"name\"])\r\n  |> group()\r\n  |> keep(columns: [\"name\"])\r\n  |> sort(columns: [\"name\"])\r\n","hide":0,"includeAll":true,"label":"","multi":true,"name":"LAN","options":[],"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => \r\n    r._measurement == \"interface\"\r\n  )\r\n  |> keyValues(keyColumns: [\"name\"])\r\n  |> group()\r\n  |> keep(columns: [\"name\"])\r\n  |> sort(columns: [\"name\"])\r\n","refresh":1,"regex":"/^(?!enc0$|igb0$|igb2$|igb3$|ovpnc1$|wg0$)/","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"gateways\" and\r\n  r.host =~ /^${Host:regex}$/)\r\n|> keyValues(keyColumns: [\"gateway_name\"])\r\n|> group()\r\n|> keep(columns: [\"gateway_name\"])\r\n|> distinct(column: \"gateway_name\")","hide":0,"includeAll":true,"multi":true,"name":"Gateway","options":[],"query":"from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"gateways\" and\r\n  r.host =~ /^${Host:regex}$/)\r\n|> keyValues(keyColumns: [\"gateway_name\"])\r\n|> group()\r\n|> keep(columns: [\"gateway_name\"])\r\n|> distinct(column: \"gateway_name\")","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"hide":0,"includeAll":true,"multi":true,"name":"WAN","options":[{"selected":true,"text":"All","value":"$__all"},{"selected":false,"text":"em0_vlan10","value":"em0_vlan10"}],"query":"em0_vlan10","queryValue":"","skipUrlSync":false,"type":"custom"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"type":"influxdb","uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"interface\")\r\n  |> last()\r\n  |> group(columns: [\"tag\"])\r\n  |> keep(columns: [\"name\"])","hide":0,"includeAll":true,"label":"FW_Interface","multi":true,"name":"iface","options":[],"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"interface\")\r\n  |> last()\r\n  |> group(columns: [\"tag\"])\r\n  |> keep(columns: [\"name\"])","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"allValue":"*","current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"type":"elasticsearch","uid":"${ESdataSource}"},"definition":"{\"find\": \"terms\", \"field\": \"dst_port\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}","hide":0,"includeAll":true,"label":"FW_Destination Port","multi":true,"name":"dst_port","options":[],"query":"{\"find\": \"terms\", \"field\": \"dst_port\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"allValue":"*","current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"type":"elasticsearch","uid":"${ESdataSource}"},"definition":"{\"find\": \"terms\", \"field\": \"src_ip\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}","hide":0,"includeAll":true,"label":"FW_Source IP","multi":true,"name":"src_ip","options":[],"query":"{\"find\": \"terms\", \"field\": \"src_ip\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"}]},"time":{"from":"now-24h","to":"now"},"timepicker":{"hidden":false,"refresh_intervals":["10s"]},"timezone":"","title":"OPNsense","uid":"suTmk8c7k","version":372,"weekStart":""}
  additionalDataSources:
    - name: Loki
      type: loki
      url: http://loki.loki:3100
    - name: InfluxDB2
      type: influxdb
      access: proxy
      url: https://influxdb2.tribz.cloud
      secureJsonData:
        token: 4iDZfjN4RjHtTPYYipf6zNvUz6Te5eeeuB_Zl0ucAVLMl2giCZ6gpvv3O51Cof-jTmf0HsaO6VM7G3SPNJMNag==
      jsonData:
        version: Flux
        organization: opnsense
        defaultBucket: opnsense
    - name: Elasticsearch
      type: elasticsearch
      access: proxy
      url: https://elasticsearch.tribz.cloud
      database: graylog_0
      jsonData:
        timeField: "timestamp"
        esVersion: "7.17.3"
    - name: InfluxDB
      type: influxdb
      url: https://influxdb.tribz.cloud
      database: graphitedb
  envFromSecret: grafana-secrets
  grafana.ini:
    server:
      root_url: https://grafana.tribz.cloud
    auth.generic_oauth:
      enabled: true
      allow_sign_up: true
      name: Dex
      client_id: grafana-sso
      client_secret: $__env{GRAFANA_SSO_CLIENT_SECRET}
      scopes: openid profile email groups
      auth_url: https://dex.tribz.cloud/auth
      token_url: https://dex.tribz.cloud/token
      api_url: https://dex.tribz.cloud/userinfo
prometheus:
  prometheusSpec:
    ruleSelectorNilUsesHelmValues: false
    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelectorNilUsesHelmValues: false
    probeSelectorNilUsesHelmValues: false
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: freenas-nfs-csi-retain
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 50Gi
    # additionalScrapeConfigs:
    # - job_name: 'opnsense-telegraf'
    #   static_configs:
    #     - targets: ['opnsense.tribz.cloud:9273']
    # - job_name: 'truenas-graphite-exporter'
    #   static_configs:
    #     - targets: ['dummy-ops-cluster-dummy-master.mysql:9125']
alertmanager:
  config:
    route:
      repeat_interval: 1h
      routes:
        - receiver: "null"
          matchers:
            # - alertname =~ "InfoInhibitor|Watchdog"
            - alertname =~ "InfoInhibitor"
        - receiver: "matrix"
          continue: true
    receivers:
      - name: "null" # Add this to your config as well
      - name: "matrix"
        webhook_configs:
          - url: "http://monitoring-system-matrix-alertmanager.monitoring-system/alerts?secret=veryverysecretkeyhere"
            send_resolved: true
kubeApiServer:
  enabled: true
kubeControllerManager:
  enabled: true
  endpoints:
    - 192.168.1.200
    - 192.168.1.201
    - 192.168.1.202
kubeScheduler:
  enabled: true
  endpoints:
    - 192.168.1.200
    - 192.168.1.201
    - 192.168.1.202
kubeProxy:
  enabled: true
  endpoints:
    - 192.168.1.200
    - 192.168.1.201
    - 192.168.1.202
kubeEtcd:
  enabled: true
  endpoints:
    - 192.168.1.200
    - 192.168.1.201
    - 192.168.1.202
  service:
    enabled: true
    port: 2381
    targetPort: 2381
