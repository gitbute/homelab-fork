# kube-prometheus-stack:
grafana:
  adminPassword: admin
  defaultDashboardsTimezone: Europe/Zurich
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      hajimari.io/appName: Grafana
      hajimari.io/icon: chart-bar
    hosts:
      - &host grafana.tribz.cloud
    tls:
      - secretName: grafana-general-tls
        hosts:
          - *host
  sidecar.dashboards.searchNamespace: ALL
  plugins:
    - grafana-worldmap-panel
    - grafana-clock-panel
    - grafana-piechart-panel
  dashboardProviders:
    dashboardproviders.yaml:
      apiVersion: 1
      providers:
        - name: "default"
          orgId: 1
          folder: ""
          type: file
          disableDeletion: false
          editable: true
          options:
            path: /var/lib/grafana/dashboards/default
  dashboards:
    default:
      ArgoCD:
        json: |
          {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"Official ArgoCD Dashboard as of June 2021","editable":true,"fiscalYearStartMonth":0,"gnetId":14584,"graphTooltip":0,"id":35,"links":[],"liveNow":false,"panels":[{"collapsed":false,"datasource":{"uid":"$datasource"},"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":68,"panels":[],"targets":[{"datasource":{"uid":"$datasource"},"refId":"A"}],"title":"Overview","type":"row"},{"datasource":{"uid":"$datasource"},"gridPos":{"h":4,"w":2,"x":0,"y":1},"id":26,"links":[],"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"![argoimage](https://avatars1.githubusercontent.com/u/30269780?s=110&v=4)","mode":"markdown"},"pluginVersion":"9.4.7","targets":[{"datasource":{"uid":"$datasource"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"uid":"$datasource"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"dtdurations"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":2,"y":1},"id":32,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"9.4.7","targets":[{"datasource":{"uid":"$datasource"},"expr":"time() - max(process_start_time_seconds{job=\"argocd-server-metrics\",namespace=~\"$namespace\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"title":"Uptime","type":"stat"},{"datasource":{"uid":"$datasource"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":5,"y":1},"id":94,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"9.4.7","targets":[{"datasource":{"uid":"$datasource"},"expr":"count(count by (server) (argocd_cluster_info{namespace=~\"$namespace\"}))","format":"time_series","instant":false,"intervalFactor":1,"refId":"A"}],"title":"Clusters","type":"stat"},{"datasource":{"uid":"$datasource"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":8,"y":1},"id":75,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"9.4.7","repeatDirection":"h","targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(argocd_app_info{namespace=~\"$namespace\",dest_server=~\"$cluster\",health_status=~\"$health_status\",sync_status=~\"$sync_status\"})","format":"time_series","instant":false,"intervalFactor":1,"refId":"A"}],"title":"Applications","type":"stat"},{"datasource":{"uid":"$datasource"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":11,"y":1},"id":107,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"9.4.7","targets":[{"datasource":{"uid":"$datasource"},"expr":"count(count by (repo) (argocd_app_info{namespace=~\"$namespace\"}))","format":"time_series","instant":false,"intervalFactor":1,"refId":"A"}],"title":"Repositories","type":"stat"},{"datasource":{"uid":"$datasource"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"id":0,"op":"=","text":"0","type":1,"value":"null"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":14,"y":1},"id":100,"links":[],"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"9.4.7","repeatDirection":"h","targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(argocd_app_info{namespace=~\"$namespace\",dest_server=~\"$cluster\",operation!=\"\"})","format":"time_series","instant":true,"intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Operations","type":"gauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":4,"w":7,"x":17,"y":1},"hiddenSeries":false,"id":28,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"paceLength":10,"percentage":false,"pluginVersion":"9.4.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(argocd_app_info{namespace=~\"$namespace\",dest_server=~\"$cluster\",health_status=~\"$health_status\",sync_status=~\"$sync_status\"}) by (namespace)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Applications","tooltip":{"shared":false,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"collapsed":true,"datasource":{"uid":"$datasource"},"gridPos":{"h":1,"w":24,"x":0,"y":5},"id":77,"panels":[{"aliasColors":{"Degraded":"semi-dark-red","Healthy":"green","Missing":"semi-dark-purple","Progressing":"semi-dark-blue","Suspended":"semi-dark-orange","Unknown":"rgb(255, 255, 255)"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":12,"x":0,"y":6},"hiddenSeries":false,"id":105,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(argocd_app_info{namespace=~\"$namespace\",dest_server=~\"$cluster\",health_status=~\"$health_status\",sync_status=~\"$sync_status\",health_status!=\"\"}) by (health_status)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{health_status}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Health Status","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":2,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{"Degraded":"semi-dark-red","Healthy":"green","Missing":"semi-dark-purple","OutOfSync":"semi-dark-yellow","Progressing":"semi-dark-blue","Suspended":"semi-dark-orange","Synced":"semi-dark-green","Unknown":"rgb(255, 255, 255)"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":12,"x":12,"y":6},"hiddenSeries":false,"id":106,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(argocd_app_info{namespace=~\"$namespace\",dest_server=~\"$cluster\",health_status=~\"$health_status\",sync_status=~\"$sync_status\",health_status!=\"\"}) by (sync_status)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{sync_status}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Sync Status","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":2,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"uid":"$datasource"},"refId":"A"}],"title":"Application Status","type":"row"},{"collapsed":true,"datasource":{"uid":"$datasource"},"gridPos":{"h":1,"w":24,"x":0,"y":6},"id":104,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":3},"hiddenSeries":false,"id":56,"interval":"","legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"total","sortDesc":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":1,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(round(increase(argocd_app_sync_total{namespace=~\"$namespace\",dest_server=~\"$cluster\"}[$interval]))) by ($grouping)","format":"time_series","intervalFactor":1,"legendFormat":"{{$grouping}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Sync Activity","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"min":"0","show":true},{"decimals":-12,"format":"short","label":"","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":5,"w":24,"x":0,"y":9},"hiddenSeries":false,"id":73,"legend":{"alignAsTable":true,"avg":false,"current":false,"hideEmpty":true,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"sort":"total","sortDesc":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(round(increase(argocd_app_sync_total{namespace=~\"$namespace\",phase=~\"Error|Failed\",dest_server=~\"$cluster\"}[$interval]))) by ($grouping, phase)","format":"time_series","intervalFactor":1,"legendFormat":"{{phase}}: {{$grouping}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Sync Failures","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"decimals":0,"format":"none","label":"","logBase":1,"min":"0","show":true},{"format":"short","label":"","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"uid":"$datasource"},"refId":"A"}],"title":"Sync Stats","type":"row"},{"collapsed":true,"datasource":{"uid":"$datasource"},"gridPos":{"h":1,"w":24,"x":0,"y":7},"id":64,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":12},"hiddenSeries":false,"id":58,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"total","sortDesc":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(argocd_app_reconcile_count{namespace=~\"$namespace\",dest_server=~\"$cluster\"}[$interval])) by ($grouping)","format":"time_series","intervalFactor":1,"legendFormat":"{{$grouping}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Reconciliation Activity","tooltip":{"shared":false,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"cards":{},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateSpectral","exponent":0.5,"mode":"spectrum"},"dataFormat":"tsbuckets","datasource":{"uid":"$datasource"},"gridPos":{"h":7,"w":24,"x":0,"y":18},"heatmap":{},"hideZeroBuckets":false,"highlightCards":true,"id":60,"legend":{"show":true},"links":[],"options":{},"reverseYBuckets":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(argocd_app_reconcile_bucket{namespace=~\"$namespace\"}[$interval])) by (le)","format":"heatmap","instant":false,"intervalFactor":10,"legendFormat":"{{le}}","refId":"A"}],"title":"Reconciliation Performance","tooltip":{"show":true,"showHistogram":true},"tooltipDecimals":0,"type":"heatmap","xAxis":{"show":true},"yAxis":{"format":"short","logBase":1,"show":true},"yBucketBound":"auto"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":25},"hiddenSeries":false,"id":80,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(argocd_app_k8s_request_total{namespace=~\"$namespace\",server=~\"$cluster\"}[$interval])) by (verb, resource_kind)","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"{{verb}} {{resource_kind}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"K8s API Activity","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":31},"hiddenSeries":false,"id":96,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideZero":true,"max":true,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(workqueue_depth{namespace=~\"$namespace\",name=~\"app_.*\"}) by (name)","format":"time_series","intervalFactor":1,"legendFormat":"{{name}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Workqueue Depth","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"min":"0","show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":31},"hiddenSeries":false,"id":98,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideZero":false,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(argocd_kubectl_exec_pending{namespace=~\"$namespace\"}) by (command)","format":"time_series","intervalFactor":1,"legendFormat":"{{command}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Pending kubectl run","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":"","logBase":1,"min":"0","show":true},{"decimals":0,"format":"short","label":"","logBase":1,"min":"0","show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"uid":"$datasource"},"refId":"A"}],"title":"Controller Stats","type":"row"},{"collapsed":true,"datasource":{"uid":"$datasource"},"gridPos":{"h":1,"w":24,"x":0,"y":8},"id":102,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":26},"hiddenSeries":false,"id":34,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"go_memstats_heap_alloc_bytes{job=\"argocd-metrics\",namespace=~\"$namespace\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Memory Usage","tooltip":{"shared":false,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":33},"hiddenSeries":false,"id":108,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"irate(process_cpu_seconds_total{job=\"argocd-metrics\",namespace=~\"$namespace\"}[1m])","format":"time_series","intervalFactor":1,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"CPU Usage","tooltip":{"shared":false,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"decimals":1,"format":"none","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":40},"hiddenSeries":false,"id":62,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"hideZero":false,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"go_goroutines{job=\"argocd-metrics\",namespace=~\"$namespace\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Goroutines","tooltip":{"shared":false,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"uid":"$datasource"},"refId":"A"}],"title":"Controller Telemetry","type":"row"},{"collapsed":true,"datasource":{"uid":"$datasource"},"gridPos":{"h":1,"w":24,"x":0,"y":9},"id":88,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":27},"hiddenSeries":false,"id":90,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(argocd_cluster_api_resource_objects{namespace=~\"$namespace\",server=~\"$cluster\"}) by (server)","format":"time_series","intervalFactor":1,"legendFormat":"{{server}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Resource Objects Count","tooltip":{"shared":false,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":34},"hiddenSeries":false,"id":92,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"  sum(argocd_cluster_api_resources{namespace=~\"$namespace\",server=~\"$cluster\"}) by (server)","format":"time_series","intervalFactor":1,"legendFormat":"{{server}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"API Resources Count","tooltip":{"shared":false,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":40},"hiddenSeries":false,"id":86,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(argocd_cluster_events_total{namespace=~\"$namespace\",server=~\"$cluster\"}[$interval])) by (server)","format":"time_series","intervalFactor":1,"legendFormat":"{{server}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Cluster Events Count","tooltip":{"shared":false,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"uid":"$datasource"},"refId":"A"}],"title":"Cluster Stats","type":"row"},{"collapsed":true,"datasource":{"uid":"$datasource"},"gridPos":{"h":1,"w":24,"x":0,"y":10},"id":70,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":7},"hiddenSeries":false,"id":82,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(argocd_git_request_total{request_type=\"ls-remote\", namespace=~\"$namespace\"}[10m])) by (namespace)","format":"time_series","intervalFactor":1,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Git Requests (ls-remote)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":7},"hiddenSeries":false,"id":84,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(argocd_git_request_total{request_type=\"fetch\", namespace=~\"$namespace\"}[10m])) by (namespace)","format":"time_series","intervalFactor":1,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Git Requests (checkout)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","label":"","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"cards":{},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateSpectral","exponent":0.5,"mode":"spectrum"},"dataFormat":"tsbuckets","datasource":{"uid":"$datasource"},"gridPos":{"h":8,"w":12,"x":0,"y":15},"heatmap":{},"hideZeroBuckets":false,"highlightCards":true,"id":114,"legend":{"show":false},"options":{},"reverseYBuckets":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(argocd_git_request_duration_seconds_bucket{request_type=\"fetch\", namespace=~\"$namespace\"}[$interval])) by (le)","format":"heatmap","intervalFactor":10,"legendFormat":"{{le}}","refId":"A"}],"title":"Git Fetch Performance","tooltip":{"show":true,"showHistogram":false},"type":"heatmap","xAxis":{"show":true},"yAxis":{"format":"short","logBase":1,"show":true},"yBucketBound":"auto"},{"cards":{},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateSpectral","exponent":0.5,"mode":"spectrum"},"dataFormat":"tsbuckets","datasource":{"uid":"$datasource"},"gridPos":{"h":8,"w":12,"x":12,"y":15},"heatmap":{},"hideZeroBuckets":false,"highlightCards":true,"id":116,"legend":{"show":false},"options":{},"reverseYBuckets":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(argocd_git_request_duration_seconds_bucket{request_type=\"ls-remote\", namespace=~\"$namespace\"}[$interval])) by (le)","format":"heatmap","intervalFactor":10,"legendFormat":"{{le}}","refId":"A"}],"title":"Git Ls-Remote Performance","tooltip":{"show":true,"showHistogram":false},"type":"heatmap","xAxis":{"show":true},"yAxis":{"format":"short","logBase":1,"show":true},"yBucketBound":"auto"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":23},"hiddenSeries":false,"id":71,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"go_memstats_heap_alloc_bytes{job=\"argocd-repo-server\",namespace=~\"$namespace\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{pod}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Memory Used","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":31},"hiddenSeries":false,"id":72,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"go_goroutines{job=\"argocd-repo-server\",namespace=~\"$namespace\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{pod}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Goroutines","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"uid":"$datasource"},"refId":"A"}],"title":"Repo Server Stats","type":"row"},{"collapsed":true,"datasource":{"uid":"$datasource"},"gridPos":{"h":1,"w":24,"x":0,"y":11},"id":66,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"gridPos":{"h":8,"w":24,"x":0,"y":89},"id":61,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"go_memstats_heap_alloc_bytes{job=\"argocd-server-metrics\",namespace=~\"$namespace\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{pod}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Memory Used","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"gridPos":{"h":9,"w":24,"x":0,"y":97},"id":36,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"go_goroutines{job=\"argocd-server-metrics\",namespace=~\"$namespace\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{pod}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Goroutines","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"gridPos":{"h":9,"w":24,"x":0,"y":106},"id":38,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"go_gc_duration_seconds{job=\"argocd-server-metrics\", quantile=\"1\", namespace=~\"$namespace\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{pod}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"GC Time Quantiles","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"content":"#### gRPC Services:","gridPos":{"h":2,"w":24,"x":0,"y":115},"id":54,"links":[],"mode":"markdown","title":"","transparent":true,"type":"text"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"gridPos":{"h":9,"w":12,"x":0,"y":117},"id":40,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"rightSide":false,"show":true,"sort":"total","sortDesc":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(grpc_server_handled_total{job=\"argocd-server-metrics\",grpc_service=\"application.ApplicationService\",namespace=~\"$namespace\"}[$interval])) by (grpc_code, grpc_method)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_code}},{{grpc_method}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"ApplicationService Requests","tooltip":{"shared":false,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"gridPos":{"h":9,"w":12,"x":12,"y":117},"id":42,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"rightSide":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(grpc_server_handled_total{job=\"argocd-server-metrics\",grpc_service=\"cluster.ClusterService\",namespace=~\"$namespace\"}[$interval])) by (grpc_code, grpc_method)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_code}},{{grpc_method}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"ClusterService Requests","tooltip":{"shared":false,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"gridPos":{"h":9,"w":12,"x":0,"y":126},"id":44,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"rightSide":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(grpc_server_handled_total{job=\"argocd-server-metrics\",grpc_service=\"project.ProjectService\",namespace=~\"$namespace\"}[$interval])) by (grpc_code, grpc_method)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_code}},{{grpc_method}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"ProjectService Requests","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"gridPos":{"h":9,"w":12,"x":12,"y":126},"id":46,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(grpc_server_handled_total{job=\"argocd-server-metrics\",grpc_service=\"repository.RepositoryService\",namespace=~\"$namespace\"}[$interval])) by (grpc_code, grpc_method)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_code}},{{grpc_method}}","refId":"A"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","yaxis":"left"}],"timeRegions":[],"title":"RepositoryService Requests","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"gridPos":{"h":9,"w":12,"x":0,"y":135},"id":48,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(grpc_server_handled_total{job=\"argocd-server-metrics\",grpc_service=\"session.SessionService\",namespace=~\"$namespace\"}[$interval])) by (grpc_code, grpc_method)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_code}},{{grpc_method}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"SessionService Requests","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"gridPos":{"h":9,"w":12,"x":12,"y":135},"id":49,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(grpc_server_handled_total{job=\"argocd-server-metrics\",grpc_service=\"version.VersionService\",namespace=~\"$namespace\"}[$interval])) by (grpc_code, grpc_method)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_code}},{{grpc_method}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"VersionService Requests","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"gridPos":{"h":9,"w":12,"x":0,"y":144},"id":50,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(grpc_server_handled_total{job=\"argocd-server-metrics\",grpc_service=\"account.AccountService\",namespace=~\"$namespace\"}[$interval])) by (grpc_code, grpc_method)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_code}},{{grpc_method}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"AccountService Requests","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"$datasource"},"fill":1,"gridPos":{"h":9,"w":12,"x":12,"y":144},"id":99,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"$datasource"},"expr":"sum(increase(grpc_server_handled_total{job=\"argocd-server-metrics\",grpc_service=\"settings.SettingsService\",namespace=~\"$namespace\"}[$interval])) by (grpc_code, grpc_method)","format":"time_series","intervalFactor":1,"legendFormat":"{{grpc_code}},{{grpc_method}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"SettingsService Requests","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"uid":"$datasource"},"refId":"A"}],"title":"Server Stats","type":"row"},{"collapsed":true,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":12},"id":110,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":9},"hiddenSeries":false,"id":112,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"sum(increase(argocd_redis_request_total{namespace=~\"$namespace\"}[$interval])) by (failed)","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Requests by result","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Redis Stats","type":"row"}],"refresh":"","revision":1,"schemaVersion":38,"style":"dark","tags":[],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"hide":0,"includeAll":false,"multi":false,"name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":".*","current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"type":"prometheus","uid":"$datasource"},"definition":"label_values(kube_pod_info, namespace)","hide":0,"includeAll":true,"multi":false,"name":"namespace","options":[],"query":{"query":"label_values(kube_pod_info, namespace)","refId":"Prometheus-namespace-Variable-Query"},"refresh":1,"regex":".*argocd.*","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"auto":true,"auto_count":30,"auto_min":"1m","current":{"selected":true,"text":"auto","value":"$__auto_interval_interval"},"hide":0,"name":"interval","options":[{"selected":true,"text":"auto","value":"$__auto_interval_interval"},{"selected":false,"text":"1m","value":"1m"},{"selected":false,"text":"5m","value":"5m"},{"selected":false,"text":"10m","value":"10m"},{"selected":false,"text":"30m","value":"30m"},{"selected":false,"text":"1h","value":"1h"},{"selected":false,"text":"2h","value":"2h"},{"selected":false,"text":"4h","value":"4h"},{"selected":false,"text":"8h","value":"8h"}],"query":"1m,5m,10m,30m,1h,2h,4h,8h","refresh":2,"skipUrlSync":false,"type":"interval"},{"allValue":"","current":{"selected":false,"text":"project","value":"project"},"hide":0,"includeAll":false,"multi":false,"name":"grouping","options":[{"selected":false,"text":"namespace","value":"namespace"},{"selected":false,"text":"name","value":"name"},{"selected":true,"text":"project","value":"project"}],"query":"namespace,name,project","skipUrlSync":false,"type":"custom"},{"allValue":".*","current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"type":"prometheus","uid":"$datasource"},"definition":"label_values(argocd_cluster_info, server)","hide":0,"includeAll":true,"multi":false,"name":"cluster","options":[],"query":{"query":"label_values(argocd_cluster_info, server)","refId":"Prometheus-cluster-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{"selected":false,"text":"All","value":"$__all"},"hide":0,"includeAll":true,"multi":false,"name":"health_status","options":[{"selected":true,"text":"All","value":"$__all"},{"selected":false,"text":"Healthy","value":"Healthy"},{"selected":false,"text":"Progressing","value":"Progressing"},{"selected":false,"text":"Suspended","value":"Suspended"},{"selected":false,"text":"Missing","value":"Missing"},{"selected":false,"text":"Degraded","value":"Degraded"},{"selected":false,"text":"Unknown","value":"Unknown"}],"query":"Healthy,Progressing,Suspended,Missing,Degraded,Unknown","skipUrlSync":false,"type":"custom"},{"allValue":".*","current":{"selected":false,"text":"All","value":"$__all"},"hide":0,"includeAll":true,"multi":false,"name":"sync_status","options":[{"selected":true,"text":"All","value":"$__all"},{"selected":false,"text":"Synced","value":"Synced"},{"selected":false,"text":"OutOfSync","value":"OutOfSync"},{"selected":false,"text":"Unknown","value":"Unknown"}],"query":"Synced,OutOfSync,Unknown","skipUrlSync":false,"type":"custom"}]},"time":{"from":"now-15m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"ArgoCD","uid":"qPkgGHg7k","version":1,"weekStart":""}
      WindowsExporter:
        json: |
          {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"Windows Exporter Dashboard Created By Ismaeil Rasoulivand with love","editable":true,"fiscalYearStartMonth":0,"gnetId":14694,"graphTooltip":1,"id":2,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"s"},"overrides":[]},"gridPos":{"h":2,"w":3,"x":0,"y":0},"id":33,"interval":"","links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.4.7","repeat":"host","repeatDirection":"v","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"windows_os_time{instance=~\"$server\"} - on () windows_process_start_time{creating_process_id=\"0\",instance=\"$server\",process=\"Idle\",process_id=\"0\"}","format":"time_series","hide":false,"instant":true,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Uptime","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":80},{"color":"#d44a3a","value":90}]},"unit":"none"},"overrides":[]},"gridPos":{"h":6,"w":3,"x":3,"y":0},"id":19,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"/^\\{instance=\"192\\.168\\.1\\.10:9182\"\\}$/","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.4.7","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"100 - (avg by (instance) (irate(windows_cpu_time_total{mode=\"idle\", instance=~\"$server\"}[1m])) * 100)","format":"time_series","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"CPU Usage","type":"gauge"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":80},{"color":"#d44a3a","value":90}]},"unit":"none"},"overrides":[]},"gridPos":{"h":6,"w":3,"x":6,"y":0},"id":21,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"/^\\{instance=\"192\\.168\\.1\\.10:9182\", job=\"Windows\"\\}$/","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.4.7","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(windows_cs_physical_memory_bytes{instance=~\"$server\"} - windows_os_physical_memory_free_bytes{instance=~\"$server\"}) / windows_cs_physical_memory_bytes{instance=~\"$server\"} * 100","format":"time_series","intervalFactor":1,"refId":"A"}],"title":"Memory Usage","type":"gauge"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":80},{"color":"#d44a3a","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":6,"w":3,"x":9,"y":0},"id":23,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"/^\\{instance=\"192\\.168\\.1\\.10:9182\"\\}$/","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.4.7","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(sum(windows_logical_disk_size_bytes{volume!~\"Harddisk.*\", instance=\"$server\"}) by (instance) - sum(windows_logical_disk_free_bytes{volume!~\"Harddisk.*\", instance=\"$server\"}) by (instance)) / sum(windows_logical_disk_size_bytes{volume!~\"Harddisk.*\", instance=\"$server\"}) by (instance) * 100","format":"time_series","intervalFactor":1,"refId":"A"}],"title":"Disk Usage","type":"gauge"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100000000,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":70000000},{"color":"#d44a3a","value":90000000}]},"unit":"bps"},"overrides":[]},"gridPos":{"h":6,"w":3,"x":12,"y":0},"id":17,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.4.7","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(sum(irate(windows_net_bytes_total{instance=\"$server\"}[1m])) > 1)* 8","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"","refId":"A"},{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"  sum(irate(windows_net_bytes_total{instance=~\"$server\",nic=\"Red_Hat_VirtIO_Ethernet_Adapter\"}[5m])) / sum(windows_net_current_bandwidth{instance=~\"$server\",nic=\"Red_Hat_VirtIO_Ethernet_Adapter\"}/8) * 100","format":"time_series","hide":true,"intervalFactor":1,"refId":"B"}],"title":"Bandwidth","type":"gauge"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"dark-yellow","value":80},{"color":"#d44a3a","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":6,"w":9,"x":15,"y":0},"id":40,"links":[],"maxDataPoints":100,"options":{"displayMode":"basic","minVizHeight":10,"minVizWidth":0,"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true},"pluginVersion":"9.4.7","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","expr":"100 - (windows_logical_disk_free_bytes{instance=~\"$server\"} / windows_logical_disk_size_bytes{instance=~\"$server\"})*100","format":"time_series","hide":false,"interval":"","intervalFactor":1,"legendFormat":"{{volume}}","range":true,"refId":"A"},{"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","expr":"windows_logical_disk_free_bytes{instance=~\"$server\"}","hide":true,"interval":"","legendFormat":"{{ instance }}","range":true,"refId":"B"}],"title":"Hard Disk Usage","transformations":[{"id":"filterFieldsByName","options":{"include":{"pattern":".:"}}}],"type":"bargauge"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":2,"w":3,"x":0,"y":2},"id":35,"interval":"","links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"/^windows_cs_logical_processors\\{instance=\"192\\.168\\.1\\.10:9182\", job=\"Windows\"\\}$/","values":false},"textMode":"auto"},"pluginVersion":"9.4.7","repeat":"host","repeatDirection":"v","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"windows_cs_logical_processors{instance=~\"$server\"}","format":"time_series","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Processors","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":1,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":2,"w":3,"x":0,"y":4},"id":37,"interval":"","links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"/^windows_cs_physical_memory_bytes\\{instance=\"192\\.168\\.1\\.10:9182\", job=\"Windows\"\\}$/","values":false},"textMode":"auto"},"pluginVersion":"9.4.7","repeat":"host","repeatDirection":"v","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"windows_cs_physical_memory_bytes{instance=~\"$server\"}","format":"time_series","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"RAM","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":6},"hiddenSeries":false,"id":42,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.4.7","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"windows_time_computed_time_offset_seconds{instance=\"$server\"}","interval":"","legendFormat":"{{ instance}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"NTP Status(NTP Offset)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:209","format":"short","logBase":1,"show":true},{"$$hashKey":"object:210","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100000000,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"#299c46","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":70000000},{"color":"#d44a3a","value":90000000}]},"unit":"bps"},"overrides":[]},"gridPos":{"h":8,"w":3,"x":12,"y":6},"id":39,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"/^192\\.168\\.1\\.10:9182$/","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.4.7","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"windows_memory_swap_page_operations_total{instance=\"$server\"}","format":"time_series","hide":false,"interval":"","intervalFactor":1,"legendFormat":"{{ instance }}","refId":"A"}],"title":"Total SWAP","type":"gauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":8,"w":9,"x":15,"y":6},"hiddenSeries":false,"hideTimeOverride":false,"id":14,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":3,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.4.7","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"windows_cs_physical_memory_bytes{instance=~\"$server\"}","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"intervalFactor":1,"item":{"filter":""},"legendFormat":"Physical memory","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"B","step":5},{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"windows_os_physical_memory_free_bytes{instance=~\"$server\"}","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"intervalFactor":1,"item":{"filter":""},"legendFormat":"Free physical memory","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"C","step":5},{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"windows_os_virtual_memory_bytes{instance=~\"$server\"}","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"intervalFactor":1,"item":{"filter":""},"legendFormat":"Virtual memory","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"A","step":5},{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"windows_os_virtual_memory_free_bytes{instance=~\"$server\"}","format":"time_series","intervalFactor":1,"legendFormat":"Free virtual memory","refId":"D"}],"thresholds":[],"timeRegions":[],"title":"Memory Details","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{"idle":"dark-green","user":"dark-red"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":2,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":14},"hiddenSeries":false,"hideTimeOverride":false,"id":4,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.4.7","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"sum by (mode) (rate(windows_cpu_time_total{instance=~\"$server\"}[5m]))","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"intervalFactor":1,"item":{"filter":""},"legendFormat":"{{mode}}","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"A","step":20}],"thresholds":[],"timeRegions":[],"title":"CPU Load","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":1,"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":14},"hiddenSeries":false,"id":25,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"paceLength":10,"percentage":false,"pluginVersion":"9.4.7","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(avg without (cpu) (sum(irate(windows_cpu_time_total{instance=\"$server\",mode!=\"idle\"}[5m])) by (mode)) / 16)* 100","format":"time_series","intervalFactor":1,"legendFormat":"{{mode}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"CPU Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"percent","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":23},"hiddenSeries":false,"hideTimeOverride":false,"id":11,"legend":{"alignAsTable":false,"avg":false,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.4.7","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"rate(windows_net_bytes_sent_total{instance=~\"$server\"}[$interval]) >0","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"interval":"","intervalFactor":1,"item":{"filter":""},"legendFormat":"Sent- Upload","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"B","step":10},{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"- rate(windows_net_bytes_received_total{instance=~\"$server\"}[$interval]) <0","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"interval":"","intervalFactor":1,"item":{"filter":""},"legendFormat":"Received- Download","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"A","step":10}],"thresholds":[],"timeRegions":[],"title":"Bandwidth","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"Bps","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":true,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":2,"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":7,"x":12,"y":23},"hiddenSeries":false,"hideTimeOverride":false,"id":29,"legend":{"alignAsTable":true,"avg":true,"current":false,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":false,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"paceLength":10,"percentage":false,"pluginVersion":"9.4.7","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"sum(increase(windows_net_bytes_received_total{instance=\"$server\"}[1h])) by (instance)","format":"time_series","interval":"1h","intervalFactor":1,"legendFormat":"Received-Download","refId":"A"},{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"sum(increase(windows_net_bytes_sent_total{instance=\"$server\"}[1h])) by (instance)","format":"time_series","interval":"1h","intervalFactor":1,"legendFormat":"Sent-Upload","refId":"B"}],"thresholds":[],"timeRegions":[],"title":"Flow Per Hour","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"show":true},{"format":"bytes","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":5,"x":19,"y":23},"hiddenSeries":false,"hideTimeOverride":false,"id":10,"legend":{"alignAsTable":false,"avg":false,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.4.7","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"irate(windows_net_packets_outbound_discarded_total{instance=~\"$server\"}[$interval]) + irate(windows_net_packets_outbound_errors_total{instance=~\"$server\"}[$interval])","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"interval":"","intervalFactor":1,"item":{"filter":""},"legendFormat":"Sent-Upload","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"B","step":15},{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"irate(windows_net_packets_outbound_discarded_total{instance=~\"$server\"}[$interval]) + irate(windows_net_packets_outbound_errors_total{instance=~\"$server\"}[$interval])","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"interval":"","intervalFactor":1,"item":{"filter":""},"legendFormat":"Received-Download","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"A","step":15}],"thresholds":[],"timeRegions":[],"title":"Network discarded/error packets","tooltip":{"shared":false,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"pps","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":2,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":32},"hiddenSeries":false,"hideTimeOverride":false,"id":8,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.4.7","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"irate(windows_logical_disk_write_bytes_total{instance=~\"$server\", volume !~\"HarddiskVolume.+\"}[60s])","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"intervalFactor":1,"item":{"filter":""},"legendFormat":"Write {{volume}}","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"A","step":20},{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"- irate(windows_logical_disk_read_bytes_total{instance=~\"$server\", volume !~\"HarddiskVolume.+\"}[60s])","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"intervalFactor":1,"item":{"filter":""},"legendFormat":"Read {{volume}}","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"B","step":20}],"thresholds":[],"timeRegions":[],"title":"Disk R/W","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":11,"x":12,"y":32},"hiddenSeries":false,"hideTimeOverride":false,"id":9,"legend":{"alignAsTable":false,"avg":false,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.4.7","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"rate(windows_logical_disk_split_ios_total{instance=~\"$server\", volume !~\"HarddiskVolume.+\"}[60s])","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"intervalFactor":1,"item":{"filter":""},"legendFormat":"i/o {{volume}}","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"A","step":20}],"thresholds":[],"timeRegions":[],"title":"Hard disk i/o ops total","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"#EAB839","value":2},{"color":"#6ED0E0","value":5},{"color":"purple","value":15}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":9,"w":12,"x":0,"y":41},"hideTimeOverride":false,"id":15,"links":[],"options":{"orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.4.7","targets":[{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"windows_logical_disk_free_bytes{instance=~\"$server\", volume !~\"HarddiskVolume.+\"}","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"intervalFactor":1,"item":{"filter":""},"legendFormat":"free {{volume}}","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"refId":"A","step":20}],"title":"Partitions Free Space","type":"gauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":41},"hiddenSeries":false,"hideTimeOverride":false,"id":12,"legend":{"alignAsTable":false,"avg":false,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.4.7","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","expr":"windows_process_threads{instance=~\"$server\"}","format":"time_series","functions":[],"group":{"filter":""},"hide":false,"host":{"filter":""},"interval":"","intervalFactor":1,"item":{"filter":""},"legendFormat":"({{process}} threads) ","metric":"mysql_global_status_questions","mode":0,"options":{"showDisabledItems":false},"range":true,"refId":"A","step":20}],"thresholds":[],"timeRegions":[],"title":"system_threads","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:85","format":"short","logBase":1,"show":true},{"$$hashKey":"object:86","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":50},"hiddenSeries":false,"id":27,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"paceLength":10,"percentage":false,"pluginVersion":"9.4.7","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"windows_os_processes{instance=\"$server\"}","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"Processes","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Processes","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{"Received mysqld-exporter:9104":"#0A50A1","stopped":"#2F575E"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":50},"hiddenSeries":false,"id":7,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.4.7","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"application":{"filter":""},"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"sum(windows_service_state{instance=~\"$server\"}) by (state)","format":"time_series","functions":[],"group":{"filter":""},"host":{"filter":""},"intervalFactor":1,"item":{"filter":""},"legendFormat":"{{state}}","mode":0,"options":{"showDisabledItems":false},"refId":"A","step":5}],"thresholds":[],"timeRegions":[],"title":"Services by state","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}}],"refresh":"10s","revision":1,"schemaVersion":38,"style":"dark","tags":[],"templating":{"list":[{"auto":false,"auto_count":500,"auto_min":"30s","current":{"selected":false,"text":"60s","value":"60s"},"hide":2,"label":"Interval","name":"interval","options":[{"selected":true,"text":"60s","value":"60s"}],"query":"60s","refresh":2,"skipUrlSync":false,"type":"interval"},{"current":{"selected":false,"text":"192.168.1.10:9182","value":"192.168.1.10:9182"},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(windows_cpu_time_total, instance)","hide":0,"includeAll":false,"label":"Server","multi":false,"name":"server","options":[],"query":{"query":"label_values(windows_cpu_time_total, instance)","refId":"Prometheus-server-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Windows Exporter Dashboard","uid":"IV0hu1m7z","version":1,"weekStart":""}
      NginxRequestHandling:
        json: |
          {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"","editable":true,"fiscalYearStartMonth":0,"gnetId":9614,"graphTooltip":1,"id":32,"links":[],"liveNow":false,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"prometheus"},"description":"Total time for NGINX and upstream servers to process a request and send a response","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":0},"hiddenSeries":false,"id":91,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"prometheus"},"expr":"histogram_quantile(\n  0.5,\n  sum by (le)(\n    rate(\n      nginx_ingress_controller_request_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","legendFormat":".5","refId":"D"},{"datasource":{"uid":"prometheus"},"expr":"histogram_quantile(\n  0.95,\n  sum by (le)(\n    rate(\n    nginx_ingress_controller_request_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","legendFormat":".95","refId":"B"},{"datasource":{"uid":"prometheus"},"expr":"histogram_quantile(\n  0.99,\n  sum by (le)(\n    rate(\n      nginx_ingress_controller_request_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","legendFormat":".99","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Request Latency Percentiles","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"s","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"prometheus"},"description":"The time spent on receiving the response from the upstream server","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":0},"hiddenSeries":false,"id":94,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"prometheus"},"expr":"histogram_quantile(\n  0.5,\n  sum by (le)(\n    rate(\n      nginx_ingress_controller_response_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","instant":false,"interval":"","intervalFactor":1,"legendFormat":".5","refId":"D"},{"datasource":{"uid":"prometheus"},"expr":"histogram_quantile(\n  0.95,\n  sum by (le)(\n    rate(\n    nginx_ingress_controller_response_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","legendFormat":".95","refId":"B"},{"datasource":{"uid":"prometheus"},"expr":"histogram_quantile(\n  0.99,\n  sum by (le)(\n    rate(\n      nginx_ingress_controller_response_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","legendFormat":".99","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Upstream Response Latency Percentiles","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"s","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":8},"hiddenSeries":false,"id":93,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"prometheus"},"expr":"  sum by (method, host, path)(\n    rate(\n      nginx_ingress_controller_request_duration_seconds_count{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n","interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Request Rate by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"reqps","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"prometheus"},"description":"For each path observed, its median upstream response time","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":8},"hiddenSeries":false,"id":98,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"prometheus"},"expr":"histogram_quantile(\n  .5,\n  sum by (le, method, host, path)(\n    rate(\n      nginx_ingress_controller_response_duration_seconds_bucket{\n        ingress =~ \"$ingress\"\n      }[5m]\n    )\n  )\n)","interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Median Upstream Response Time by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"s","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"prometheus"},"description":"Percentage of 4xx and 5xx responses among all responses.","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":16},"hiddenSeries":false,"id":100,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"prometheus"},"expr":"sum by (method, host, path) (rate(nginx_ingress_controller_request_duration_seconds_count{\n  ingress =~ \"$ingress\",\n  status =~ \"[4-5].*\"\n}[5m])) / sum by (method, host, path) (rate(nginx_ingress_controller_request_duration_seconds_count{\n  ingress =~ \"$ingress\",\n}[5m]))","interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Response Error Rate by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"percentunit","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"prometheus"},"description":"For each path observed, the sum of upstream request time","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":16},"hiddenSeries":false,"id":102,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"prometheus"},"expr":"sum by (method, host, path) (rate(nginx_ingress_controller_response_duration_seconds_sum{ingress =~ \"$ingress\"}[5m]))","interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Upstream Response Time by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"s","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":24},"hiddenSeries":false,"id":101,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"prometheus"},"expr":"  sum (\n    rate(\n      nginx_ingress_controller_request_duration_seconds_count{\n        ingress =~ \"$ingress\",\n        status =~\"[4-5].*\",\n      }[5m]\n    )\n  ) by(method, host, path, status)\n","interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }} {{ status }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Response Error Rate by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"reqps","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":24},"hiddenSeries":false,"id":99,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"prometheus"},"expr":"sum (\n  rate (\n      nginx_ingress_controller_response_size_sum {\n        ingress =~ \"$ingress\",\n      }[5m]\n  )\n)  by (method, host, path) / sum (\n  rate(\n      nginx_ingress_controller_response_size_count {\n        ingress =~ \"$ingress\",\n      }[5m]\n  )\n) by (method, host, path)\n","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ method }} {{ host }}{{path }}","refId":"D"},{"datasource":{"uid":"prometheus"},"expr":"    sum (rate(nginx_ingress_controller_response_size_bucket{\n        ingress =~ \"$ingress\",\n    }[5m])) by (le)\n","hide":true,"legendFormat":"{{le}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Average Response Size by Method and Path","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"decbytes","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"prometheus"},"fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":32},"hiddenSeries":false,"id":96,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.4","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"prometheus"},"expr":"sum (\n  rate(\n      nginx_ingress_controller_ingress_upstream_latency_seconds_sum {\n        ingress =~ \"$ingress\",\n      }[5m]\n)) / sum (\n  rate(\n      nginx_ingress_controller_ingress_upstream_latency_seconds_count {\n        ingress =~ \"$ingress\",\n      }[5m]\n  )\n)\n","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"average","refId":"B"}],"thresholds":[],"timeRegions":[],"title":"Upstream Service Latency","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"s","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"refresh":"30s","schemaVersion":37,"style":"dark","tags":["nginx"],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"hide":0,"includeAll":false,"label":"datasource","multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":".*","current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"uid":"prometheus"},"definition":"label_values(nginx_ingress_controller_requests, ingress) ","hide":0,"includeAll":true,"label":"Service Ingress","multi":false,"name":"ingress","options":[],"query":{"query":"label_values(nginx_ingress_controller_requests, ingress) ","refId":"Prometheus-ingress-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":2,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-15m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","2m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"NGINX Request Handling Performance","uid":"4GFbkOsZk","version":1,"weekStart":""}
      IngressNginx:
        json: |
          {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"},{"datasource":{"type":"prometheus","uid":"prometheus"},"enable":true,"expr":"sum(changes(nginx_ingress_controller_config_last_reload_successful_timestamp_seconds{instance!=\"unknown\",controller_class=~\"$controller_class\",namespace=~\"$namespace\"}[30s])) by (controller_class)","hide":false,"iconColor":"rgba(255, 96, 96, 1)","limit":100,"name":"Config Reloads","showIn":0,"step":"30s","tagKeys":"controller_class","tags":[],"titleFormat":"Config Reloaded","type":"tags"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":31,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"ops"},"overrides":[]},"id":20,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.6","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"round(sum(irate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\"}[2m])), 0.001)","format":"time_series","intervalFactor":1,"refId":"A","step":4}],"title":"Controller Request Volume","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":6,"y":0},"id":82,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.6","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"sum(avg_over_time(nginx_ingress_controller_nginx_process_connections{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",state=\"active\"}[2m]))","format":"time_series","instant":false,"intervalFactor":1,"refId":"A","step":4}],"title":"Controller Connections","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(245, 54, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":95},{"color":"rgba(50, 172, 45, 0.97)","value":99}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":12,"y":0},"id":21,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.6","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\",status!~\"[4-5].*\"}[2m])) / sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\"}[2m]))","format":"time_series","intervalFactor":1,"refId":"A","step":4}],"title":"Controller Success Rate (non-4|5xx responses)","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":18,"y":0},"id":81,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.6","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"avg(irate(nginx_ingress_controller_success{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[1m])) * 60","format":"time_series","instant":false,"intervalFactor":1,"refId":"A","step":4}],"title":"Config Reloads","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"decimals":0,"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":3,"x":21,"y":0},"id":83,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.6","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(nginx_ingress_controller_config_last_reload_successful{controller_pod=~\"$controller\",controller_namespace=~\"$namespace\"} == 0)","format":"time_series","instant":true,"intervalFactor":1,"refId":"A","step":4}],"title":"Last Config Failed","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":2,"editable":true,"error":false,"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":3},"height":"200px","hiddenSeries":false,"id":86,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":false,"hideEmpty":false,"hideZero":true,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":300,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":5,"points":false,"renderer":"flot","repeatDirection":"h","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"round(sum(irate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress), 0.001)","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ ingress }}","metric":"network","refId":"A","step":10}],"thresholds":[],"timeRegions":[],"title":"Ingress Request Volume","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"reqps","logBase":1,"show":true},{"format":"Bps","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"max - istio-proxy":"#890f02","max - master":"#bf1b00","max - prometheus":"#bf1b00"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":2,"editable":false,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":3},"hiddenSeries":false,"id":87,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":false,"hideEmpty":true,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":300,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\",ingress=~\"$ingress\",status!~\"[4-5].*\"}[2m])) by (ingress) / sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress)","format":"time_series","instant":false,"interval":"10s","intervalFactor":1,"legendFormat":"{{ ingress }}","metric":"container_memory_usage:sort_desc","refId":"A","step":10}],"thresholds":[],"timeRegions":[],"title":"Ingress Success Rate (non-4|5xx responses)","tooltip":{"msResolution":false,"shared":true,"sort":1,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"percentunit","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":2,"editable":true,"error":false,"fill":1,"fillGradient":0,"grid":{},"gridPos":{"h":6,"w":8,"x":0,"y":10},"height":"200px","hiddenSeries":false,"id":32,"isNew":true,"legend":{"alignAsTable":false,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":false,"sideWidth":200,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"sum (irate (nginx_ingress_controller_request_size_sum{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[2m]))","format":"time_series","instant":false,"interval":"10s","intervalFactor":1,"legendFormat":"Received","metric":"network","refId":"A","step":10},{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"- sum (irate (nginx_ingress_controller_response_size_sum{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[2m]))","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"legendFormat":"Sent","metric":"network","refId":"B","step":10}],"thresholds":[],"timeRegions":[],"title":"Network I/O pressure","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"Bps","logBase":1,"show":true},{"format":"Bps","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"max - istio-proxy":"#890f02","max - master":"#bf1b00","max - prometheus":"#bf1b00"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":2,"editable":false,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":6,"w":8,"x":8,"y":10},"hiddenSeries":false,"id":77,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":false,"sideWidth":200,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"avg(nginx_ingress_controller_nginx_process_resident_memory_bytes{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}) ","format":"time_series","instant":false,"interval":"10s","intervalFactor":1,"legendFormat":"nginx","metric":"container_memory_usage:sort_desc","refId":"A","step":10}],"thresholds":[],"timeRegions":[],"title":"Average Memory Usage","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bytes","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{"max - istio-proxy":"#890f02","max - master":"#bf1b00"},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":3,"editable":false,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":6,"w":8,"x":16,"y":10},"height":"","hiddenSeries":false,"id":79,"isNew":true,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":false,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.6","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"avg (rate (nginx_ingress_controller_nginx_process_cpu_seconds_total{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[2m])) ","format":"time_series","interval":"10s","intervalFactor":1,"legendFormat":"nginx","metric":"container_cpu","refId":"A","step":10}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt"}],"timeRegions":[],"title":"Average CPU Usage","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","label":"cores","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"columns":[],"datasource":{"type":"prometheus","uid":"prometheus"},"description":"This data is real time, independent of dashboard time range","fontSize":"100%","gridPos":{"h":8,"w":24,"x":0,"y":16},"hideTimeOverride":false,"id":75,"links":[],"pageSize":7,"repeatDirection":"h","scroll":true,"showHeader":true,"sort":{"col":1,"desc":true},"styles":[{"alias":"Ingress","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"ingress","preserveFormat":false,"sanitize":false,"thresholds":[],"type":"string","unit":"short"},{"alias":"Requests","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"Value #A","thresholds":[""],"type":"number","unit":"ops"},{"alias":"Errors","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"Value #B","thresholds":[],"type":"number","unit":"ops"},{"alias":"P50 Latency","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":0,"link":false,"pattern":"Value #C","thresholds":[],"type":"number","unit":"dtdurations"},{"alias":"P90 Latency","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":0,"pattern":"Value #D","thresholds":[],"type":"number","unit":"dtdurations"},{"alias":"P99 Latency","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":0,"pattern":"Value #E","thresholds":[],"type":"number","unit":"dtdurations"},{"alias":"IN","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"Value #F","thresholds":[""],"type":"number","unit":"Bps"},{"alias":"","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"Time","thresholds":[],"type":"hidden","unit":"short"},{"alias":"OUT","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"Value #G","thresholds":[],"type":"number","unit":"Bps"}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"histogram_quantile(0.50, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le, ingress))","format":"table","hide":false,"instant":true,"intervalFactor":1,"legendFormat":"{{ ingress }}","refId":"C"},{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"histogram_quantile(0.90, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le, ingress))","format":"table","hide":false,"instant":true,"intervalFactor":1,"legendFormat":"{{ ingress }}","refId":"D"},{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"histogram_quantile(0.99, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le, ingress))","format":"table","hide":false,"instant":true,"intervalFactor":1,"legendFormat":"{{ destination_service }}","refId":"E"},{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"sum(irate(nginx_ingress_controller_request_size_sum{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress)","format":"table","hide":false,"instant":true,"interval":"","intervalFactor":1,"legendFormat":"{{ ingress }}","refId":"F"},{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"sum(irate(nginx_ingress_controller_response_size_sum{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress)","format":"table","instant":true,"intervalFactor":1,"legendFormat":"{{ ingress }}","refId":"G"}],"title":"Ingress Percentile Response Times and Transfer Rates","transform":"table","type":"table-old"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"s"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":24},"hideTimeOverride":false,"id":91,"links":[],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"8.3.4","repeatDirection":"h","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"exemplar":true,"expr":"histogram_quantile(0.80, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le))","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"P80","refId":"C"},{"datasource":{"type":"prometheus","uid":"prometheus"},"exemplar":true,"expr":"histogram_quantile(0.90, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le))","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"P90","refId":"D"},{"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","exemplar":true,"expr":"histogram_quantile(0.99, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le))","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"P99","refId":"E"}],"title":"Ingress Percentile Response Times","type":"timeseries"},{"cards":{},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateWarm","exponent":0.5,"mode":"spectrum"},"dataFormat":"tsbuckets","datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false},"scaleDistribution":{"type":"linear"}}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":24},"heatmap":{},"hideZeroBuckets":false,"highlightCards":true,"id":89,"legend":{"show":true},"options":{"calculate":false,"calculation":{},"cellGap":2,"cellValues":{},"color":{"exponent":0.5,"fill":"#b4ff00","mode":"scheme","reverse":false,"scale":"exponential","scheme":"Warm","steps":128},"exemplars":{"color":"rgba(255,0,255,0.7)"},"filterValues":{"le":1e-9},"legend":{"show":true},"rowsFrame":{"layout":"auto"},"showValue":"never","tooltip":{"show":true,"yHistogram":true},"yAxis":{"axisPlacement":"left","reverse":false,"unit":"s"}},"pluginVersion":"9.3.6","reverseYBuckets":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"exemplar":true,"expr":"sum(increase(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le)","format":"heatmap","interval":"","legendFormat":"{{le}}","refId":"A"}],"title":"Ingress Request Latency Heatmap","tooltip":{"show":true,"showHistogram":true},"type":"heatmap","xAxis":{"show":true},"yAxis":{"format":"s","logBase":1,"show":true},"yBucketBound":"auto"},{"columns":[{"text":"Current","value":"current"}],"datasource":{"type":"prometheus","uid":"prometheus"},"fontSize":"100%","gridPos":{"h":8,"w":24,"x":0,"y":31},"height":"1024","id":85,"links":[],"pageSize":7,"scroll":true,"showHeader":true,"sort":{"col":1,"desc":false},"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"date"},{"alias":"TTL","align":"auto","colorMode":"cell","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":0,"pattern":"Current","thresholds":["0","691200"],"type":"number","unit":"s"},{"alias":"","align":"auto","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"decimals":2,"pattern":"/.*/","thresholds":[],"type":"number","unit":"short"}],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"avg(nginx_ingress_controller_ssl_expire_time_seconds{kubernetes_pod_name=~\"$controller\",namespace=~\"$namespace\",ingress=~\"$ingress\"}) by (host) - time()","format":"time_series","intervalFactor":1,"legendFormat":"{{ host }}","metric":"gke_letsencrypt_cert_expiration","refId":"A","step":1}],"title":"Ingress Certificate Expiry","transform":"timeseries_aggregations","type":"table-old"}],"refresh":"5s","schemaVersion":37,"style":"dark","tags":["nginx"],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"hide":0,"includeAll":false,"label":"datasource","multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":".*","current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"","hide":0,"includeAll":true,"label":"Namespace","multi":false,"name":"namespace","options":[],"query":{"query":"label_values(nginx_ingress_controller_config_hash, controller_namespace)","refId":"Prometheus-namespace-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"","hide":0,"includeAll":true,"label":"Controller Class","multi":false,"name":"controller_class","options":[],"query":{"query":"label_values(nginx_ingress_controller_config_hash{namespace=~\"$namespace\"}, controller_class) ","refId":"Prometheus-controller_class-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"","hide":0,"includeAll":true,"label":"Controller","multi":false,"name":"controller","options":[],"query":{"query":"label_values(nginx_ingress_controller_config_hash{namespace=~\"$namespace\",controller_class=~\"$controller_class\"}, controller_pod) ","refId":"Prometheus-controller-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":".*","current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"","hide":0,"includeAll":true,"label":"Ingress","multi":false,"name":"ingress","options":[],"query":{"query":"label_values(nginx_ingress_controller_requests{namespace=~\"$namespace\",controller_class=~\"$controller_class\",controller_pod=~\"$controller\"}, ingress) ","refId":"Prometheus-ingress-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":2,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","2m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"NGINX Ingress controller","uid":"nginx","version":1,"weekStart":""}
      LokiKubernetesLogs:
        json: |
          {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"Logs collected from Kubernetes, stored in Loki","editable":true,"fiscalYearStartMonth":0,"gnetId":15141,"graphTooltip":0,"id":30,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"loki","uid":"P8E80F9AEF21F6940"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"bars","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":4,"w":24,"x":0,"y":0},"id":4,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":false},"tooltip":{"mode":"single","sort":"none"}},"targets":[{"datasource":{"type":"loki","uid":"P8E80F9AEF21F6940"},"expr":"sum(count_over_time({namespace=~\"$namespace\", stream=~\"$stream\", container =~\"$container\"} |= \"$query\" [$__interval]))","instant":false,"legendFormat":"Log count","range":true,"refId":"A"}],"type":"timeseries"},{"datasource":{"type":"loki","uid":"P8E80F9AEF21F6940"},"description":"Logs from services running in Kubernetes","gridPos":{"h":25,"w":24,"x":0,"y":4},"id":2,"options":{"dedupStrategy":"none","enableLogDetails":true,"prettifyLogMessage":false,"showCommonLabels":false,"showLabels":false,"showTime":false,"sortOrder":"Descending","wrapLogMessage":false},"targets":[{"datasource":{"type":"loki","uid":"P8E80F9AEF21F6940"},"expr":"{namespace=~\"$namespace\", stream=~\"$stream\", container =~\"$container\"} |= \"$query\"","refId":"A"}],"type":"logs"}],"refresh":false,"schemaVersion":37,"style":"dark","tags":[],"templating":{"list":[{"current":{"selected":false,"text":"","value":""},"description":"String to search for","hide":0,"label":"Search Query","name":"query","options":[{"selected":true,"text":"","value":""}],"query":"","skipUrlSync":false,"type":"textbox"},{"allValue":".+","current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"type":"loki","uid":"P8E80F9AEF21F6940"},"definition":"label_values(namespace)","hide":0,"includeAll":true,"multi":true,"name":"namespace","options":[],"query":"label_values(namespace)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"allValue":".+","current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"type":"loki","uid":"P8E80F9AEF21F6940"},"definition":"label_values(stream)","hide":0,"includeAll":true,"multi":true,"name":"stream","options":[],"query":"label_values(stream)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"allValue":".+","current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"type":"loki","uid":"P8E80F9AEF21F6940"},"definition":"label_values(container)","hide":0,"includeAll":true,"multi":true,"name":"container","options":[],"query":"label_values(container)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"","title":"Loki Kubernetes Logs","uid":"o6-BGgnnk","version":1,"weekStart":""}
      TrueNAS:
        json: |
          {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"TrueNAS/FreeNAS dashboard using InfluxDb with graphite endpoint as data source.  ","editable":true,"fiscalYearStartMonth":0,"gnetId":12921,"graphTooltip":0,"id":1,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","gridPos":{"h":3,"w":4,"x":0,"y":0},"id":21,"options":{"bgColor":"dark-purple","clockType":"24 hour","countdownSettings":{"endCountdownTime":"2020-08-29T01:16:48-04:00","endText":"00:00:00"},"countupSettings":{"beginCountupTime":"2023-01-07T16:31:03+01:00","beginText":"00:00:00"},"dateSettings":{"dateFormat":"D. MMMM YYYY","fontSize":"18px","fontWeight":"normal","locale":"","showDate":true},"mode":"time","refresh":"sec","timeSettings":{"fontSize":"24px","fontWeight":"normal"},"timezone":"Europe/Zurich","timezoneSettings":{"fontSize":"12px","fontWeight":"normal","showTimezone":false,"zoneFormat":"offsetAbbv"}},"pluginVersion":"2.1.2","targets":[{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"title":"Zürich","type":"grafana-clock-panel"},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"dark-yellow","value":null}]},"unit":"dtdhms"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":4,"y":0},"id":8,"options":{"colorMode":"background","graphMode":"none","justifyMode":"center","orientation":"horizontal","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"value"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"}],"hide":false,"measurement":"uptime","orderByTime":"ASC","policy":"autogen","query":"SELECT last(\"value\") FROM \"uptime\" ","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"}]],"tags":[{"key":"host","operator":"=","value":"truenas_local"}]}],"title":"Uptime","type":"stat"},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fieldConfig":{"defaults":{"decimals":0,"mappings":[],"max":60,"min":30,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"dark-yellow","value":40},{"color":"dark-red","value":50}]},"unit":"celsius"},"overrides":[]},"gridPos":{"h":9,"w":9,"x":8,"y":0},"id":6,"interval":"","links":[],"maxDataPoints":70,"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"9.3.1","targets":[{"alias":"ada0","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"ada0","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"ada1","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"ada1","orderByTime":"ASC","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"ada2","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"ada2","orderByTime":"ASC","policy":"default","refId":"C","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"ada3","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"ada3","orderByTime":"ASC","policy":"default","refId":"D","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"ada4","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"ada4","orderByTime":"ASC","policy":"default","refId":"E","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"ada5","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["none"],"type":"fill"}],"measurement":"ada5","orderByTime":"ASC","policy":"default","refId":"F","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]}],"title":"Current Disk Temperature (°C)","transformations":[{"id":"filterFieldsByName","options":{"include":{"names":["ada0","ada1","ada2","ada3","ada4","ada5"]}}}],"type":"gauge"},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fieldConfig":{"defaults":{"decimals":2,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"semi-dark-red","value":null},{"color":"dark-red","value":0},{"color":"#EAB839","value":7102877592064},{"color":"dark-green","value":14392877592064}]},"unit":"bits"},"overrides":[]},"gridPos":{"h":6,"w":7,"x":17,"y":0},"id":17,"links":[],"maxDataPoints":100,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"alias":"Tank","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"mnt-tank","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"mnt-MediaPool_df_complex_used\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["df_complex.free"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"title":"Available Space","type":"stat"},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fieldConfig":{"defaults":{"decimals":3,"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":50},{"color":"dark-red","value":90}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":9,"w":2,"x":0,"y":3},"id":23,"links":[],"maxDataPoints":100,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"vertical","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"showUnfilled":false},"pluginVersion":"9.3.1","targets":[{"alias":"Usage","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"cpu-average","orderByTime":"ASC","policy":"default","query":"SELECT 100 - last(\"gauge.idle\") FROM \"cpu-average\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":true,"refId":"B","resultFormat":"time_series","select":[[{"params":["gauge.idle"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"title":"CPU","type":"bargauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"fill":1,"fillGradient":9,"gridPos":{"h":9,"w":6,"x":2,"y":3},"hiddenSeries":false,"id":13,"legend":{"alignAsTable":false,"avg":true,"current":false,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"alias":"Longterm","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"measurement":"load","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"vmx0_if_octets_rx\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["longterm"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"Midterm","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"load","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"vmx0_if_octets_rx\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["midterm"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"Shortterm","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"load","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"vmx0_if_octets_rx\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"C","resultFormat":"time_series","select":[[{"params":["shortterm"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"thresholds":[],"timeRegions":[],"title":"System Load","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"none","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"breakPoint":"50%","combine":{"label":"Others","threshold":0},"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"decimals":1,"description":"","fontSize":"100%","format":"bits","gridPos":{"h":7,"w":7,"x":17,"y":6},"id":12,"legend":{"percentage":false,"show":true,"sideWidth":0,"values":true},"legendType":"Right side","links":[],"nullPointMode":"connected","pieType":"donut","pluginVersion":"7.1.3","strokeWidth":"1","targets":[{"alias":"Free","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"memory","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"memory.free\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["free"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"memory"}]},{"alias":"ZFS Cache","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"cache_size","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"memory.active\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["arc"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"zfs_arc"}]},{"alias":"Services","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"cache_size","orderByTime":"ASC","policy":"default","query":"SELECT last(\"c\")+ last(\"p\")+ last(\"dbuf_size\")+ last(\"dnode_size\")+ last(\"hdr_size\")+ last(\"metadata_size\")+ last(\"mfu_ghost_size\")+ last(\"mfu_size\")+ last(\"mru_ghost_size\")+ last(\"mru_size\") FROM \"cache_size\" WHERE (\"resource\" = 'zfs_arc') AND $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"C","resultFormat":"time_series","select":[[{"params":["c"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"zfs_arc"}]}],"title":"Physical Memory Utilization","type":"grafana-piechart-panel","valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fill":1,"fillGradient":2,"gridPos":{"h":7,"w":9,"x":8,"y":9},"hiddenSeries":false,"id":19,"interval":"","legend":{"alignAsTable":false,"avg":false,"current":false,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"maxDataPoints":70,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":true,"pluginVersion":"9.3.1","pointradius":0.5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"ada0","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"ada0","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"ada0.temperature\"","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"ada1","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"ada1","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"ada0.temperature\"","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"ada2","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"ada2","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"ada0.temperature\"","rawQuery":false,"refId":"C","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"ada3","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"ada3","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"ada0.temperature\"","rawQuery":false,"refId":"D","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"ada4","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"ada4","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"ada0.temperature\"","rawQuery":false,"refId":"E","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]},{"alias":"ada5","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"ada5","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"ada0.temperature\"","rawQuery":false,"refId":"F","resultFormat":"time_series","select":[[{"params":["temperature"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"resource","operator":"=","value":"disktemp"}]}],"thresholds":[],"timeRegions":[],"title":"Disk Temperature","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"transformations":[{"id":"filterFieldsByName","options":{"include":{"names":["Time","ada0","ada1","ada2","ada3","ada4","ada5"]}}}],"type":"graph","xaxis":{"mode":"time","show":false,"values":[]},"yaxes":[{"format":"celsius","label":"Temperature (°C)","logBase":1,"show":true},{"format":"short","logBase":1,"show":false}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"fill":2,"fillGradient":10,"gridPos":{"h":11,"w":8,"x":0,"y":12},"hiddenSeries":false,"id":25,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":false,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":0.5,"points":true,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"ada0","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["ada0"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada1","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["ada1"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada2","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"C","resultFormat":"time_series","select":[[{"params":["ada2"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada3","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"D","resultFormat":"time_series","select":[[{"params":["ada3"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada4","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"E","resultFormat":"time_series","select":[[{"params":["ada4"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada5","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"geom_busy_percent","orderByTime":"ASC","policy":"default","refId":"F","resultFormat":"time_series","select":[[{"params":["ada5"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"thresholds":[],"timeRegions":[],"title":"Disk Busy (%)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"filterFieldsByName","options":{}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"dark-red","value":null},{"color":"dark-green","value":80}]},"unit":"bits"},"overrides":[]},"gridPos":{"h":3,"w":7,"x":17,"y":13},"id":14,"links":[],"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"orientation":"horizontal","reduceOptions":{"calcs":["firstNotNull"],"fields":"","values":false},"showUnfilled":true},"pluginVersion":"9.3.1","targets":[{"alias":"Free","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"swap","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"memory-free\"\n\n","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["free"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"Used","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"swap","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"memory-free\"\n\n","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["used"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"title":"Swap Utilization","transformations":[{"id":"filterFieldsByName","options":{"include":{"names":["Free","Used","Time"]}}}],"type":"bargauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"fill":2,"fillGradient":4,"gridPos":{"h":7,"w":16,"x":8,"y":16},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":false,"avg":false,"current":false,"hideEmpty":false,"max":true,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"Rx","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"alc0","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"vmx0_if_octets_rx\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["if_octets.rx"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"Tx","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"alc0","orderByTime":"ASC","policy":"default","query":"SELECT * FROM \"vmx0_if_octets_rx\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["if_octets.tx"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeRegions":[],"title":"Interface Traffic","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"bps","label":"","logBase":2,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"decimals":2,"mappings":[],"max":14390000000000,"min":0,"thresholds":{"mode":"percentage","steps":[{"color":"semi-dark-red","value":null}]},"unit":"bits"},"overrides":[]},"gridPos":{"h":10,"w":24,"x":0,"y":23},"id":26,"links":[],"maxDataPoints":100,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"9.3.1","targets":[{"alias":"Tank","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"mnt-tank","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"mnt-MediaPool_df_complex_used\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["df_complex.free"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"title":"Available Space over Time Extrapolate","type":"timeseries"},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"decimals":5,"mappings":[],"thresholds":{"mode":"percentage","steps":[{"color":"semi-dark-red","value":null}]},"unit":"bits"},"overrides":[]},"gridPos":{"h":10,"w":24,"x":0,"y":33},"id":28,"links":[],"maxDataPoints":100,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"9.3.1","targets":[{"alias":"Tank","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"mnt-tank","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"mnt-MediaPool_df_complex_used\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["df_complex.free"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"title":"Available Space over Time","type":"timeseries"},{"datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"decimals":2,"mappings":[],"thresholds":{"mode":"percentage","steps":[{"color":"semi-dark-red","value":null}]},"unit":"ops"},"overrides":[]},"gridPos":{"h":10,"w":24,"x":0,"y":43},"id":27,"links":[],"maxDataPoints":100,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"9.3.1","targets":[{"alias":"ada1read","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"ada1","orderByTime":"ASC","policy":"default","query":"SELECT last(\"disk_ops.read\") +, last(\"disk_ops.read\") + FROM \"ada1\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["disk_ops.read"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada1write","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"measurement":"ada1","orderByTime":"ASC","policy":"default","query":"SELECT last(\"disk_ops.read\") +, last(\"disk_ops.read\") + FROM \"ada1\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["disk_ops.write"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada2read","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"measurement":"ada2","orderByTime":"ASC","policy":"default","query":"SELECT last(\"disk_ops.read\") +, last(\"disk_ops.read\") + FROM \"ada1\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"C","resultFormat":"time_series","select":[[{"params":["disk_ops.read"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada2write","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"measurement":"ada2","orderByTime":"ASC","policy":"default","query":"SELECT last(\"disk_ops.read\") +, last(\"disk_ops.read\") + FROM \"ada1\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"D","resultFormat":"time_series","select":[[{"params":["disk_ops.write"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada3read","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"measurement":"ada3","orderByTime":"ASC","policy":"default","query":"SELECT last(\"disk_ops.read\") +, last(\"disk_ops.read\") + FROM \"ada1\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"E","resultFormat":"time_series","select":[[{"params":["disk_ops.read"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada3write","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"measurement":"ada3","orderByTime":"ASC","policy":"default","query":"SELECT last(\"disk_ops.read\") +, last(\"disk_ops.read\") + FROM \"ada1\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"F","resultFormat":"time_series","select":[[{"params":["disk_ops.write"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada4read","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"measurement":"ada4","orderByTime":"ASC","policy":"default","query":"SELECT last(\"disk_ops.read\") +, last(\"disk_ops.read\") + FROM \"ada1\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"G","resultFormat":"time_series","select":[[{"params":["disk_ops.read"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada4write","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"measurement":"ada4","orderByTime":"ASC","policy":"default","query":"SELECT last(\"disk_ops.read\") +, last(\"disk_ops.read\") + FROM \"ada1\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"H","resultFormat":"time_series","select":[[{"params":["disk_ops.write"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada5read","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"measurement":"ada5","orderByTime":"ASC","policy":"default","query":"SELECT last(\"disk_ops.read\") +, last(\"disk_ops.read\") + FROM \"ada1\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"I","resultFormat":"time_series","select":[[{"params":["disk_ops.read"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]},{"alias":"ada5write","datasource":{"type":"influxdb","uid":"P951FEA4DE68E13C5"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"measurement":"ada5","orderByTime":"ASC","policy":"default","query":"SELECT last(\"disk_ops.read\") +, last(\"disk_ops.read\") + FROM \"ada1\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"J","resultFormat":"time_series","select":[[{"params":["disk_ops.write"],"type":"field"},{"params":[],"type":"last"}]],"tags":[]}],"title":"HDD IOPS","transformations":[{"id":"calculateField","options":{"mode":"reduceRow","reduce":{"reducer":"sum"},"replaceFields":false}}],"type":"timeseries"}],"refresh":false,"schemaVersion":37,"style":"dark","tags":["TrueNAS","FreeNAS","InfluxDB","Graphite"],"templating":{"list":[]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"TrueNAS","uid":"ruU9VdNMk","version":1,"weekStart":""}
      Longhorn:
        json: |
          {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"An example dashboard for Longhorn v1.1.0","editable":true,"fiscalYearStartMonth":0,"gnetId":13032,"graphTooltip":0,"id":30,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":3,"w":24,"x":0,"y":0},"id":4,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"<div class=\"dashboard-header text-center\">\n<span>VOLUMES</span>\n</div>","mode":"html"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"The total number of volumes in the Longhorn storage system","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":0,"y":3},"id":8,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_capacity_bytes) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Total Number Of Volumes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Healthy volumes are volumes that are attaching to a node and have the number of healthy replicas equals to the expected number of replicas.","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"green","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":4,"y":3},"id":13,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_robustness==1) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Healthy Volumes","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Note that Longhorn volume actual size is not the size of the filesystem inside a Longhorn volume.  See more at : https://longhorn.io/docs/1.0.2/volumes-and-nodes/volume-size/#volume-actual-size","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":15,"x":9,"y":3},"hiddenSeries":false,"id":12,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"( (avg by (volume) (longhorn_volume_actual_size_bytes))/ (avg by (volume) (longhorn_volume_capacity_bytes)) ) *100","interval":"","legendFormat":"{{volume}}","refId":"A"}],"thresholds":[{"$$hashKey":"object:649","colorMode":"critical","fill":true,"line":true,"op":"gt","value":90,"yaxis":"left"}],"timeRegions":[],"title":"Volume Actual Size/Capacity","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:476","format":"percent","logBase":1,"show":true},{"$$hashKey":"object:477","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Degraded volumes are volumes that have the number of healthy replicas smaller than the expected number of replicas. e.g. User creates a volume with 2 replicas but 1 replicas is failed.","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"orange","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":0,"y":9},"id":15,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_robustness==2) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Degraded Volumes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Fault volumes are volumes that doesn't have any healthy replica.","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":4,"y":9},"id":16,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_robustness==3) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Fault Volumes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"The capacity of each Longhorn volume","fieldConfig":{"defaults":{"custom":{"displayMode":"auto","inspect":false},"decimals":1,"mappings":[{"options":{"":{"text":""}},"type":"value"}],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[{"matcher":{"id":"byName","options":"volume"},"properties":[{"id":"custom.displayMode","value":"auto"}]},{"matcher":{"id":"byName","options":"Capacity"},"properties":[{"id":"custom.displayMode","value":"lcd-gauge"}]}]},"gridPos":{"h":9,"w":15,"x":9,"y":12},"id":10,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":4,"showHeader":true,"sortBy":[{"desc":true,"displayName":"Capacity"}]},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"avg by (volume) (longhorn_volume_capacity_bytes)","format":"table","instant":true,"interval":"","intervalFactor":1,"legendFormat":"{{volume}}","refId":"A"}],"title":"Volume Capacity","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{},"renameByName":{"Value":"Capacity"}}}],"type":"table"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Attached volumes are volumes that are currently attaching to a node","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"green","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":0,"y":15},"id":34,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_state==2) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Attached Volumes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Detached volumes are volumes that aren't currently attaching to a node","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":4,"y":15},"id":14,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_volume_state==3) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Detached Volumes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":3,"w":24,"x":0,"y":21},"id":6,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"<div class=\"dashboard-header text-center\">\n<span>NODES</span>\n</div>","mode":"html"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"The total number of nodes in the Longhorn storage system","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":0,"y":24},"id":18,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"avg(longhorn_node_count_total) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Total Number Of Nodes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Disabled nodes are nodes that are disabled by the user.  When users disable a node, Longhorn will not use the node's storage for replica scheduling. Note that Longhorn can still attach a volume to disabled nodes because the actual data of the volume could be on a different node.","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":4,"y":24},"id":21,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count(longhorn_node_status{condition=\"allowScheduling\"}==0) OR on() vector(0)","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Disabled Nodes","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fill":1,"fillGradient":0,"gridPos":{"h":10,"w":15,"x":9,"y":24},"hiddenSeries":false,"id":24,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(longhorn_node_storage_usage_bytes/longhorn_node_storage_capacity_bytes) * 100","interval":"","legendFormat":"{{node}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Node Storage Usage/Capacity","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:530","format":"percent","logBase":1,"show":true},{"$$hashKey":"object:531","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Schedulable nodes are nodes that Longhorn can use their storage for replica scheduling.","fieldConfig":{"defaults":{"custom":{},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"red"},{"color":"green","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":0,"y":30},"id":20,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.1.5","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(count(longhorn_node_status{condition=\"schedulable\"}==1) OR on() vector(0)) - (count(longhorn_node_status{condition=\"allowScheduling\"}==0) OR on() vector(0))","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Schedulable Nodes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Failed Nodes are nodes that Longhorn cannot attach volumes to and cannot schedule replicas onto. e.g: when the nodes went down.","fieldConfig":{"defaults":{"custom":{},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":1}]}},"overrides":[]},"gridPos":{"h":6,"w":4,"x":4,"y":30},"id":22,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"textMode":"auto"},"pluginVersion":"7.1.5","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(avg(longhorn_node_count_total) OR on() vector(0)) - (count(longhorn_node_status{condition=\"ready\"}==1) OR on() vector(0))","interval":"","legendFormat":"","refId":"A"}],"title":"Number Of Failed Nodes","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"custom":{},"decimals":1,"mappings":[],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"bytes"},"overrides":[{"matcher":{"id":"byName","options":"Storage Capacity"},"properties":[{"id":"custom.displayMode","value":"lcd-gauge"}]}]},"gridPos":{"h":10,"w":15,"x":9,"y":34},"id":23,"options":{"showHeader":true},"pluginVersion":"7.1.5","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_node_storage_capacity_bytes","format":"table","instant":true,"interval":"","legendFormat":"{{node}}","refId":"A"}],"title":"Node Capacity","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"__name__":true,"endpoint":true,"instance":true,"job":true,"namespace":true,"pod":true,"service":true},"indexByName":{},"renameByName":{"Value":"Storage Capacity"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":0,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":0,"y":36},"hiddenSeries":false,"id":26,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"count by (node) (longhorn_volume_state==2)","interval":"","legendFormat":"{{node}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Number of Volumes Per Node","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:422","decimals":0,"format":"short","logBase":1,"show":true},{"$$hashKey":"object:423","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":3,"w":24,"x":0,"y":44},"id":17,"options":{"content":"<div class=\"dashboard-header text-center\">\n<span>DISKS</span>\n</div>","mode":"html"},"pluginVersion":"7.1.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"transparent":true,"type":"text"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"The capacity of each Longhorn volume","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":12,"x":0,"y":47},"hiddenSeries":false,"id":32,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(longhorn_disk_usage_bytes/longhorn_disk_capacity_bytes)*100","interval":"","legendFormat":"{{disk}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Disk Space Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:530","format":"percent","logBase":1,"show":true},{"$$hashKey":"object:531","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"custom":{},"decimals":1,"mappings":[],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"bytes"},"overrides":[{"matcher":{"id":"byName","options":"Capacity"},"properties":[{"id":"custom.displayMode","value":"lcd-gauge"}]}]},"gridPos":{"h":10,"w":12,"x":12,"y":47},"id":33,"options":{"showHeader":true},"pluginVersion":"7.1.5","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_disk_capacity_bytes","format":"table","instant":true,"interval":"","legendFormat":"{{disk}}","refId":"A"}],"title":"Disk Capacity","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":false,"__name__":true,"disk":false,"endpoint":true,"instance":true,"job":true,"namespace":true,"pod":true,"service":true},"indexByName":{},"renameByName":{"Value":"Capacity"}}}],"type":"table"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":3,"w":24,"x":0,"y":57},"id":5,"options":{"content":"<div class=\"dashboard-header text-center\">\n<span>CPU & MEMORY</span>\n</div>","mode":"html"},"pluginVersion":"7.1.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"transparent":true,"type":"text"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":12,"x":0,"y":60},"hiddenSeries":false,"id":36,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(longhorn_node_cpu_usage_millicpu / longhorn_node_cpu_capacity_millicpu) * 100","interval":"","legendFormat":"{{node}}","refId":"A"}],"thresholds":[{"$$hashKey":"object:1092","colorMode":"critical","fill":true,"line":true,"op":"gt","value":80,"yaxis":"left"}],"timeRegions":[],"title":"Node CPU Usage/Capacity","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:865","decimals":0,"format":"percent","logBase":1,"show":true},{"$$hashKey":"object:866","format":"none","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":12,"x":12,"y":60},"hiddenSeries":false,"id":38,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"( longhorn_node_memory_usage_bytes / longhorn_node_memory_capacity_bytes ) * 100","interval":"","legendFormat":"{{node}}","refId":"A"}],"thresholds":[{"$$hashKey":"object:1092","colorMode":"critical","fill":true,"line":true,"op":"gt","value":80,"yaxis":"left"}],"timeRegions":[],"title":"Node Memory Usage/Capacity","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:865","decimals":0,"format":"percent","logBase":1,"show":true},{"$$hashKey":"object:866","format":"none","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":0,"description":"Instance managers are pods that contains the engine and replica processes of Longhorn volumes. See more at https://longhorn.io/docs/1.0.2/concepts/#11-the-longhorn-manager-and-the-longhorn-engine ","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":8,"x":0,"y":70},"hiddenSeries":false,"id":28,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_instance_manager_cpu_usage_millicpu","interval":"","legendFormat":"{{instance_manager}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Instance Manager CPU Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:865","decimals":0,"format":"milicpu","logBase":1,"show":true},{"$$hashKey":"object:866","format":"none","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Instance managers are pods that contains the engine and replica processes of Longhorn volumes. See more at https://longhorn.io/docs/1.0.2/concepts/#11-the-longhorn-manager-and-the-longhorn-engine ","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":8,"x":8,"y":70},"hiddenSeries":false,"id":30,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"(longhorn_instance_manager_cpu_usage_millicpu/longhorn_instance_manager_cpu_requests_millicpu)*100","interval":"","legendFormat":"{{instance_manager}}","refId":"A"}],"thresholds":[{"$$hashKey":"object:1092","colorMode":"critical","fill":true,"line":true,"op":"gt","value":100,"yaxis":"left"}],"timeRegions":[],"title":"Instance Manager CPU Usage/Request","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:865","decimals":0,"format":"percent","logBase":1,"show":true},{"$$hashKey":"object:866","format":"none","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Instance managers are pods that contains the engine and replica processes of Longhorn volumes. See more at https://longhorn.io/docs/1.0.2/concepts/#11-the-longhorn-manager-and-the-longhorn-engine ","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":10,"w":8,"x":16,"y":70},"hiddenSeries":false,"id":29,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_instance_manager_memory_usage_bytes","interval":"","legendFormat":"{{instance_manager}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Instance Manager Memory Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:865","format":"bytes","logBase":1,"show":true},{"$$hashKey":"object:866","format":"none","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"decimals":0,"description":"Longhorn manager pods manage the control plane of the Longhorn system. e.g. Volume scheduling, attaching, detaching, backup, etc,..","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":80},"hiddenSeries":false,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_manager_cpu_usage_millicpu","interval":"","legendFormat":"{{manager}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Longhorn Manager CPU Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1500","decimals":0,"format":"milicpu","logBase":1,"show":true},{"$$hashKey":"object:1501","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"prometheus"},"description":"Longhorn manager pods manage the control plane of the Longhorn system. e.g. Volume scheduling, attaching, detaching, backup, etc,..","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":80},"hiddenSeries":false,"id":31,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","percentage":false,"pluginVersion":"7.1.5","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"expr":"longhorn_manager_memory_usage_bytes","interval":"","legendFormat":"{{manager}}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Longhorn Manager Memory Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1500","format":"bytes","logBase":1,"show":true},{"$$hashKey":"object:1501","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"refresh":"30s","schemaVersion":37,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"Longhorn","uid":"2BCgsldGz","version":1,"weekStart":""}
      OPNsense:
        json: |
          {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":2,"links":[],"liveNow":true,"panels":[{"collapsed":false,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":22,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Hardware","type":"row"},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":2,"x":0,"y":1},"id":20,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -20s)\r\n  |> filter(fn: (r) =>\r\n    r._measurement == \"system\" and\r\n    r._field == \"n_users\"\r\n  )\r\n  |> keep(columns: [\"_value\"])\r\n  |> last()","refId":"A"}],"title":"Active Users","type":"stat"},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"displayName":"CPU","mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":70},{"color":"red","value":85}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":6,"w":3,"x":2,"y":1},"id":4,"maxDataPoints":9000,"options":{"orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"9.3.1","targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -20s)\r\n  |> filter(fn: (r) =>\r\n    r._measurement == \"cpu\" and\r\n    r._field == \"usage_idle\" and\r\n    r.cpu == \"cpu-total\"\r\n  )\r\n  |> map(fn: (r) => ({\r\n        r with\r\n        _value: r._value * -1.0 + 100.0\r\n      })\r\n    )\r\n  |> keep(columns: [\"_value\"])\r\n  |> last()","refId":"A"}],"title":"CPU Total","type":"gauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":6,"x":5,"y":1},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"cpu\" and\r\n    r._field == \"usage_idle\")\r\n  |> map(fn: (r) => ({\r\n        r with\r\n        _value: r._value * -1.0 + 100.0\r\n      })\r\n    )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> drop(columns: [\"host\"])","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"CPU","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"transformations":[{"id":"labelsToFields","options":{"valueLabel":"cpu"}},{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{"cpu-total":true},"indexByName":{},"renameByName":{}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:39","decimals":0,"format":"percent","logBase":1,"max":"100","min":"0","show":true},{"$$hashKey":"object:40","decimals":2,"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"auto","filterable":false,"inspect":false,"minWidth":1},"decimals":0,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":3,"w":7,"x":11,"y":1},"id":8,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":0,"showHeader":true,"sortBy":[]},"pluginVersion":"9.3.1","targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"processes\" and\r\n    r._field =~ /running|idle|sleeping|wait|blocked|zombies/\r\n  )\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  |> last()","refId":"A"}],"title":"Process Information","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"filterFieldsByName","options":{"include":{"pattern":"/blocked|idle|running|sleeping|wait|zombies/"}}},{"id":"organize","options":{"excludeByName":{},"indexByName":{"blocked":4,"idle":1,"running":0,"sleeping":2,"wait":3,"zombies":5},"renameByName":{"blocked":"Blocked","idle":"Idle","running":"Running","sleeping":"Sleeping","wait":"Wait","zombies":"Zombies"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":6,"x":18,"y":1},"hiddenSeries":false,"id":10,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"system\" and\r\n    r._field =~ /load1|load5|load15/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Load","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:112","decimals":1,"format":"none","logBase":1,"show":true},{"$$hashKey":"object:113","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":3,"w":2,"x":0,"y":4},"id":6,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"/.*/","values":false},"text":{},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -20s)\r\n  |> filter(fn: (r) =>\r\n    r._measurement == \"system\" and\r\n    r._field == \"uptime_format\"\r\n  )\r\n  |> keep(columns: [\"_value\"])\r\n  |> last()\r\n","refId":"A"}],"title":"Uptime","type":"stat"},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"auto","inspect":false,"minWidth":1},"decimals":1,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"locale"},"overrides":[]},"gridPos":{"h":3,"w":7,"x":11,"y":4},"id":16,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"showHeader":true},"pluginVersion":"9.3.1","targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"pf\" and\r\n    r._field =~ /match|state-mismatch|state-insert/\r\n  )\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  |> last()","refId":"A"}],"title":"PF Information","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{"Time":false},"indexByName":{},"renameByName":{"Time":"","match":"Match","state-insert":"State Insert","state-mismatch":"State Mismatch"}}},{"id":"filterFieldsByName","options":{"include":{"pattern":"/Match|State Insert|State Mismatch/"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"decimals":2,"fieldConfig":{"defaults":{"unit":"percent"},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":5,"w":7,"x":0,"y":7},"hiddenSeries":false,"id":12,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"${dataSource}"},"hide":false,"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.device != \"devfs\" and\r\n    r.device =~ /^${Disk:regex}$/ and\r\n    r._measurement == \"disk\" and\r\n    r._field == \"used_percent\"\r\n  )","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Disk Utilization","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"labelsToFields","options":{"valueLabel":"path"}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:206","format":"percent","logBase":1,"max":"100","min":"0","show":true},{"$$hashKey":"object:207","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"unit":"percent"},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":5,"w":9,"x":7,"y":7},"hiddenSeries":false,"id":14,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"mem\" and\r\n    r._field == \"used_percent\"\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  ","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Ram","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"used_percent":"Ram Used"}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:416","format":"percent","logBase":1,"max":"100","min":"0","show":true},{"$$hashKey":"object:417","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fill":1,"fillGradient":0,"gridPos":{"h":5,"w":8,"x":16,"y":7},"hiddenSeries":false,"id":18,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"9.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.sensor =~ /^${Sensor:regex}$/ and\r\n    r._measurement == \"temperature\" and\r\n    r._field == \"degrees\"\r\n  )\r\n  |> aggregateWindow(every:10s, fn: last)","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Temperature Sensors","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"labelsToFields","options":{"valueLabel":"sensor"}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:33","format":"celsius","logBase":1,"show":true},{"$$hashKey":"object:34","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"collapsed":false,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":12},"id":55,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Firewall","type":"row"},{"datasource":{"uid":"${ESdataSource}"},"fieldConfig":{"defaults":{"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":6,"x":0,"y":13},"id":111,"links":[],"options":{"colorMode":"value","fieldOptions":{"calcs":["sum"]},"graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"9.3.1","targets":[{"bucketAggs":[{"$$hashKey":"object:14","field":"timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"datasource":{"uid":"${ESdataSource}"},"metrics":[{"$$hashKey":"object:12","field":"select field","id":"1","type":"count"}],"query":"interface:$iface AND src_ip:$src_ip AND dst_port:$dst_port AND action:\"block\"","refId":"A","target":"","timeField":"timestamp"}],"title":"Firewall Blocked Events on $iface","type":"stat"},{"circleMaxSize":"","circleMinSize":"","colors":["#37872D","#E0B400","#C4162A","#8F3BB8"],"datasource":{"uid":"${ESdataSource}"},"decimals":0,"esGeoPoint":"src_location","esLocationName":"src_ip","esMetric":"Count","gridPos":{"h":11,"w":13,"x":6,"y":13},"height":"","hideEmpty":false,"hideZero":false,"id":59,"initialZoom":"1","links":[],"locationData":"countries","mapCenter":"(0°, 0°)","mapCenterLatitude":0,"mapCenterLongitude":0,"maxDataPoints":1,"mouseWheelZoom":false,"showLegend":true,"stickyLabels":false,"tableQueryOptions":{"geohashField":"geohash","latitudeField":"latitude","longitudeField":"longitude","metricField":"metric","queryType":"geohash"},"targets":[{"alias":"","bucketAggs":[{"$$hashKey":"object:974","fake":true,"field":"src_ip_country_code","id":"3","settings":{"min_doc_count":1,"order":"asc","orderBy":"_count","size":"0"},"type":"terms"},{"$$hashKey":"object:975","field":"timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"datasource":{"uid":"${ESdataSource}"},"dsType":"elasticsearch","metrics":[{"$$hashKey":"object:972","field":"select field","id":"1","type":"count"}],"query":"interface:$iface AND src_ip:$src_ip AND action:\"block\"","refId":"A","timeField":"timestamp"}],"thresholds":"10,100,500","title":"Firewall Blocked Event Locations on $iface","type":"grafana-worldmap-panel","unitPlural":"","unitSingle":"","valueName":"total"},{"datasource":{"uid":"${ESdataSource}"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":3,"w":5,"x":19,"y":13},"id":67,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","fieldOptions":{"calcs":["first"]},"graphMode":"none","justifyMode":"center","orientation":"horizontal","reduceOptions":{"calcs":["first"],"fields":"/^src_ip$/","values":true},"text":{},"textMode":"value"},"pluginVersion":"9.3.1","targets":[{"bucketAggs":[{"$$hashKey":"object:120","fake":true,"field":"src_ip","id":"3","settings":{"min_doc_count":1,"order":"desc","orderBy":"_count","size":"1"},"type":"terms"}],"datasource":{"uid":"${ESdataSource}"},"dsType":"elasticsearch","metrics":[{"$$hashKey":"object:118","field":"select field","id":"1","type":"count"}],"query":"action:\"block\" AND interface:$iface AND src_ip:$src_ip AND dst_port:$dst_port","refId":"A","target":"","timeField":"timestamp"}],"title":"Top IP Blocked on $iface","transformations":[],"type":"stat"},{"datasource":{"uid":"${ESdataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"decimals":0,"mappings":[],"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":6,"x":0,"y":16},"id":61,"links":[],"maxDataPoints":1,"options":{"legend":{"calcs":[],"displayMode":"table","placement":"right","showLegend":true,"values":["value"]},"pieType":"pie","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"tooltip":{"mode":"single","sort":"none"}},"targets":[{"alias":"","bucketAggs":[{"$$hashKey":"object:1775","fake":true,"field":"dst_port","id":"3","settings":{"min_doc_count":1,"order":"desc","orderBy":"_count","size":"5"},"type":"terms"},{"$$hashKey":"object:1776","field":"timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"datasource":{"uid":"${ESdataSource}"},"dsType":"elasticsearch","metrics":[{"$$hashKey":"object:1773","field":"select field","id":"1","type":"count"}],"query":"interface:$iface AND src_ip:$src_ip AND dst_port:$dst_port AND action:\"block\"","refId":"A","target":"","timeField":"timestamp"}],"title":"Firewall Blocked Destination Ports on $iface","type":"piechart"},{"datasource":{"type":"elasticsearch","uid":"${ESdataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"decimals":0,"mappings":[],"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":5,"x":19,"y":16},"id":65,"links":[],"maxDataPoints":1,"options":{"legend":{"calcs":[],"displayMode":"table","placement":"right","showLegend":true,"values":["value"]},"pieType":"pie","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"tooltip":{"mode":"single","sort":"none"}},"targets":[{"bucketAggs":[{"$$hashKey":"object:1049","fake":true,"field":"protocol_name","id":"3","settings":{"min_doc_count":1,"order":"desc","orderBy":"_term","size":"0"},"type":"terms"},{"$$hashKey":"object:1050","field":"timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"datasource":{"type":"elasticsearch","uid":"${ESdataSource}"},"dsType":"elasticsearch","metrics":[{"$$hashKey":"object:1047","field":"select field","id":"1","type":"count"}],"query":"interface:$iface AND src_ip:$src_ip AND action:\"block\"","refId":"A","timeField":"timestamp"}],"title":"Firewall Blocked Protocols on $iface","type":"piechart"},{"collapsed":false,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":24},"id":24,"panels":[],"targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"Network Stats","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":0,"y":25},"hiddenSeries":false,"id":26,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.gateway_name =~ /^${Gateway:regex}$/ and\r\n    r._measurement == \"gateways\" and\r\n    r._field == \"delay\"\r\n  )","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Gateway RTT - $Gateway ","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"labelsToFields","options":{"valueLabel":"gateway_name"}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:164","format":"ms","logBase":10,"show":true},{"$$hashKey":"object:165","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"influxdb","uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"color-text","filterable":true,"minWidth":1},"mappings":[{"options":{"0":{"index":2,"text":"DOWN"},"1":{"index":1,"text":"UP"},"2":{"index":0,"text":"UNKNOWN"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"#ffffff"}]}},"overrides":[{"matcher":{"id":"byName","options":"Status"},"properties":[{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"transparent"},{"color":"red","value":0},{"color":"green","value":1},{"color":"orange","value":2}]}}]}]},"gridPos":{"h":10,"w":16,"x":8,"y":25},"id":32,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":0,"showHeader":true,"sortBy":[]},"pluginVersion":"8.3.3","targets":[{"datasource":{"type":"influxdb","uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"interface\"\r\n  )\r\n  |> last()\r\n  |> group()\r\n  |> keep(columns: [\"friendlyname\", \"ip4_address\", \"ip4_subnet\", \"mac_address\", \"name\", \"_value\"])\r\n  |> sort(columns:[\"name\"])","refId":"A"}],"title":"Interface Summary","transformations":[{"id":"organize","options":{"excludeByName":{},"indexByName":{"_value":5,"friendlyname":1,"ip4_address":2,"ip4_subnet":3,"mac_address":4,"name":0},"renameByName":{"_value":"Status","friendlyname":"Friendly Name","ip4_address":"IPv4 Address","ip4_subnet":"Subnet","mac_address":"Physical Address","name":"Interface"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":0,"y":33},"hiddenSeries":false,"id":38,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.gateway_name =~ /^${Gateway:regex}$/ and\r\n    r._measurement == \"gateways\" and\r\n    r._field == \"loss\"\r\n  )","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Gateway Loss - $Gateway ","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"labelsToFields","options":{"valueLabel":"gateway_name"}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:97","decimals":0,"format":"percent","logBase":1,"max":"100","min":"0","show":true},{"$$hashKey":"object:98","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"influxdb","uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"color-text","filterable":true,"minWidth":1},"mappings":[{"options":{"0":{"color":"red","index":0,"text":"OFFLINE"},"1":{"color":"green","index":1,"text":"ONLINE"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"#ffffff"}]}},"overrides":[]},"gridPos":{"h":6,"w":16,"x":8,"y":35},"id":46,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":3,"showHeader":true,"sortBy":[{"desc":false}]},"pluginVersion":"8.3.3","targets":[{"datasource":{"type":"influxdb","uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) =>\r\n    r._measurement == \"gateways\" and\r\n    r._field =~ /gwdescr|source|monitor|status|gateway_name|interface/\r\n    )\r\n  |> last()\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"title":"Gateway Summary - $Gateway","transformations":[{"id":"filterFieldsByName","options":{"include":{"names":["gwdescr","monitor","source","status"]}}},{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"gwdescr":"Gateway Description","monitor":"Monitor IP","source":"Source IP","status":"Status"}}}],"type":"table"},{"collapsed":false,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":41},"id":30,"panels":[],"repeat":"WAN","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"WAN Interface - $WAN","type":"row"},{"datasource":{"type":"influxdb","uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"color-text","filterable":true,"minWidth":1},"mappings":[{"options":{"0":{"index":2,"text":"DOWN"},"1":{"index":1,"text":"UP"},"2":{"index":0,"text":"UNKNOWN"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"#fffffffc"},{"color":"red","value":0},{"color":"green","value":1},{"color":"orange","value":2}]}},"overrides":[]},"gridPos":{"h":3,"w":24,"x":0,"y":42},"id":28,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":7,"showHeader":true,"sortBy":[]},"pluginVersion":"8.3.3","targets":[{"datasource":{"type":"influxdb","uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.name =~ /^${WAN:regex}$/ and\r\n    r._measurement == \"interface\" and\r\n    r._field == \"status\")\r\n  |> group()\r\n  |> last()\r\n  |> keep(columns: [\"friendlyname\", \"ip4_address\", \"name\", \"ip4_subnet\" \"mac_address\", \"_value\"])","refId":"A"}],"title":"Interface Summary","transformations":[{"id":"organize","options":{"excludeByName":{},"indexByName":{"_value":5,"friendlyname":1,"ip4_address":2,"ip4_subnet":3,"mac_address":4,"name":0},"renameByName":{"_value":"Status","friendlyname":"Friendly Name","ip4_address":"IPV4 Address","ip4_subnet":"Subnet","mac_address":"Physical Address","name":"Interface"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"decimals":2,"description":"","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":6,"x":0,"y":45},"hiddenSeries":false,"id":34,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${WAN:regex}$/ and \r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: r._value * 8.0\r\n    })\r\n  )\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"WAN Traffic - Bits/sec","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"Time":"","bytes_recv":"Bits Recv","bytes_sent":"Bits Sent"}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:63","decimals":2,"format":"bps","logBase":2,"show":true},{"$$hashKey":"object:64","decimals":2,"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"bps"},"overrides":[]},"gridPos":{"h":7,"w":5,"x":6,"y":45},"id":36,"maxDataPoints":9000,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.3.3","targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${WAN:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: r._value * 8.0\r\n    })\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  |> last()","refId":"A"}],"title":"WAN Traffic - Bits/sec","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{},"renameByName":{"bytes_recv":"Bits Recv","bytes_sent":"Bits Sent"}}}],"type":"stat"},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":7,"w":5,"x":11,"y":45},"hideTimeOverride":true,"id":40,"maxDataPoints":9000,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.3.3","targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30d)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${WAN:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> aggregateWindow(every: 1h, fn: last)\r\n  |> difference(nonNegative: true)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"timeFrom":"now/M","title":"WAN - Bandwidth","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"bytes_recv":"Bytes Recv - This Month","bytes_sent":"Bytes Sent - This Month"}}}],"type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"unit":"short"},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":16,"y":45},"hiddenSeries":false,"id":42,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.interface =~ /^${WAN:regex}$/ and \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /packets_recv|packets_sent/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"WAN - Throughput","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"packets_recv":"Packets Recv","packets_sent":"Packets Sent"}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:191","decimals":2,"format":"short","logBase":2,"show":true},{"$$hashKey":"object:192","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"collapsed":false,"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":1,"w":24,"x":0,"y":52},"id":48,"panels":[],"repeat":"LAN","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"refId":"A"}],"title":"LAN Interface  - $LAN","type":"row"},{"datasource":{"type":"influxdb","uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","displayMode":"color-text","filterable":true,"minWidth":1},"mappings":[{"options":{"0":{"index":2,"text":"DOWN"},"1":{"index":1,"text":"UP"},"2":{"index":0,"text":"UNKNOWN"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"#fffffffc"},{"color":"red","value":0},{"color":"green","value":1},{"color":"orange","value":2}]}},"overrides":[]},"gridPos":{"h":3,"w":24,"x":0,"y":53},"id":52,"options":{"footer":{"fields":"","reducer":["sum"],"show":false},"frameIndex":7,"showHeader":true},"pluginVersion":"8.3.3","targets":[{"datasource":{"type":"influxdb","uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30s)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.name =~ /^${LAN:regex}$/ and\r\n    r._measurement == \"interface\" and\r\n    r._field == \"status\")\r\n  |> group()\r\n  |> last()\r\n  |> keep(columns: [\"friendlyname\", \"ip4_address\", \"name\", \"ip4_subnet\" \"mac_address\", \"_value\"])","refId":"A"}],"title":"Interface Summary","transformations":[{"id":"organize","options":{"excludeByName":{},"indexByName":{"_value":5,"friendlyname":1,"ip4_address":2,"ip4_subnet":3,"mac_address":4,"name":0},"renameByName":{"_value":"Status","friendlyname":"Friendly Name","ip4_address":"IPV4 Address","ip4_subnet":"Subnet","mac_address":"Physical Address","name":"Interface"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"decimals":2,"description":"","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":6,"x":0,"y":56},"hiddenSeries":false,"id":49,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${LAN:regex}$/ and \r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: r._value * 8.0\r\n    })\r\n  )\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"${LAN} Traffic - Bits/sec","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"bytes_recv":"Bits Recv","bytes_sent":"Bits Sent"}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:63","decimals":2,"format":"bps","logBase":2,"show":true},{"$$hashKey":"object:64","decimals":2,"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"bps"},"overrides":[]},"gridPos":{"h":7,"w":5,"x":6,"y":56},"id":51,"maxDataPoints":9000,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.3.3","targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -1m)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${LAN:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: r._value * 8.0\r\n    })\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))\r\n  |> last()","refId":"A"}],"title":"${LAN} Traffic - Bits/sec","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{"Time":0,"bytes_recv":1,"bytes_sent":2},"renameByName":{"bytes_recv":"Bits Recv","bytes_sent":"Bits Sent"}}}],"type":"stat"},{"datasource":{"uid":"${dataSource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":2,"mappings":[{"options":{"match":"null","result":{"index":0,"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":7,"w":5,"x":11,"y":56},"hideTimeOverride":true,"id":50,"maxDataPoints":9000,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.3.3","targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: -30d)\r\n  |> filter(fn: (r) => \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r.interface =~ /^${LAN:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /bytes_recv|bytes_sent/\r\n  )\r\n  |> aggregateWindow(every: 1h, fn: last)\r\n  |> difference(nonNegative: true)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"timeFrom":"now/M","title":"${LAN} - Bandwidth","transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{"Time":0,"bytes_recv":2,"bytes_sent":1},"renameByName":{"bytes_recv":"Bytes Recv - This Month","bytes_sent":"Bytes Sent - This Month"}}}],"type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"uid":"${dataSource}"},"decimals":2,"fieldConfig":{"defaults":{"unit":"short"},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":16,"y":56},"hiddenSeries":false,"id":53,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideZero":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"maxDataPoints":9000,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.3.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"datasource":{"uid":"${dataSource}"},"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) =>\r\n    r.interface =~ /^${LAN:regex}$/ and \r\n    r.host =~ /^${Host:regex}$/ and\r\n    r._measurement == \"net\" and\r\n    r._field =~ /packets_recv|packets_sent/\r\n  )\r\n  |> aggregateWindow(every: 10s, fn: last)\r\n  |> derivative(unit:1s)\r\n  |> map(fn: (r) => ({_value:r._value, _time:r._time, _field:r._field}))","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"${LAN} - Throughput","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[{"id":"concatenate","options":{"frameNameLabel":"frame","frameNameMode":"drop"}},{"id":"organize","options":{"excludeByName":{},"indexByName":{},"renameByName":{"packets_recv":"Packets Recv","packets_sent":"Packets Sent"}}}],"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:176","decimals":2,"format":"short","logBase":2,"show":true},{"$$hashKey":"object:177","decimals":2,"format":"short","label":"","logBase":1,"show":true}],"yaxis":{"align":false}}],"refresh":"10s","schemaVersion":37,"style":"dark","tags":["OPNsense","telegraf"],"templating":{"list":[{"current":{"selected":true,"text":"InfluxDB2","value":"InfluxDB2"},"hide":0,"includeAll":false,"label":"InfluxDB","multi":false,"name":"dataSource","options":[],"query":"influxdb","queryValue":"","refresh":1,"regex":"InfluxDB2","skipUrlSync":false,"type":"datasource"},{"current":{"selected":false,"text":"Elasticsearch","value":"Elasticsearch"},"hide":0,"includeAll":false,"label":"ElasticSearch","multi":false,"name":"ESdataSource","options":[],"query":"elasticsearch","queryValue":"","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"pf\")\r\n|> keyValues(keyColumns: [\"host\"])\r\n|> group()\r\n|> keep(columns: [\"host\"])\r\n|> distinct(column: \"host\")","hide":0,"includeAll":true,"label":"OPNsense","multi":true,"name":"Host","options":[],"query":"from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"pf\")\r\n|> keyValues(keyColumns: [\"host\"])\r\n|> group()\r\n|> keep(columns: [\"host\"])\r\n|> distinct(column: \"host\")","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn:(r) => r._measurement == \"disk\" and\r\n  r.host =~ /^${Host:regex}$/)\r\n  |> keyValues(keyColumns: [\"device\"])\r\n  |> group()\r\n  |> keep(columns: [\"device\"])\r\n  |> distinct(column: \"device\")","hide":0,"includeAll":true,"multi":false,"name":"Disk","options":[],"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn:(r) => r._measurement == \"disk\" and\r\n  r.host =~ /^${Host:regex}$/)\r\n  |> keyValues(keyColumns: [\"device\"])\r\n  |> group()\r\n  |> keep(columns: [\"device\"])\r\n  |> distinct(column: \"device\")","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":false,"text":"All","value":"$__all"},"datasource":{"uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn:(r) => r._measurement == \"temperature\" and\r\n    r.host =~ /^${Host:regex}$/)\r\n  |> keyValues(keyColumns: [\"sensor\"])\r\n  |> group()\r\n  |> keep(columns: [\"sensor\"])\r\n  |> distinct(column: \"sensor\")","hide":0,"includeAll":true,"multi":false,"name":"Sensor","options":[],"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn:(r) => r._measurement == \"temperature\" and\r\n    r.host =~ /^${Host:regex}$/)\r\n  |> keyValues(keyColumns: [\"sensor\"])\r\n  |> group()\r\n  |> keep(columns: [\"sensor\"])\r\n  |> distinct(column: \"sensor\")","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => \r\n    r._measurement == \"interface\"\r\n  )\r\n  |> keyValues(keyColumns: [\"name\"])\r\n  |> group()\r\n  |> keep(columns: [\"name\"])\r\n  |> sort(columns: [\"name\"])\r\n","hide":0,"includeAll":true,"label":"","multi":true,"name":"LAN","options":[],"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => \r\n    r._measurement == \"interface\"\r\n  )\r\n  |> keyValues(keyColumns: [\"name\"])\r\n  |> group()\r\n  |> keep(columns: [\"name\"])\r\n  |> sort(columns: [\"name\"])\r\n","refresh":1,"regex":"/^(?!enc0$|igb0$|igb2$|igb3$|ovpnc1$|wg0$)/","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"gateways\" and\r\n  r.host =~ /^${Host:regex}$/)\r\n|> keyValues(keyColumns: [\"gateway_name\"])\r\n|> group()\r\n|> keep(columns: [\"gateway_name\"])\r\n|> distinct(column: \"gateway_name\")","hide":0,"includeAll":true,"multi":true,"name":"Gateway","options":[],"query":"from(bucket: v.defaultBucket)\r\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n|> filter(fn:(r) => r._measurement == \"gateways\" and\r\n  r.host =~ /^${Host:regex}$/)\r\n|> keyValues(keyColumns: [\"gateway_name\"])\r\n|> group()\r\n|> keep(columns: [\"gateway_name\"])\r\n|> distinct(column: \"gateway_name\")","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"hide":0,"includeAll":true,"multi":true,"name":"WAN","options":[{"selected":true,"text":"All","value":"$__all"},{"selected":false,"text":"em0_vlan10","value":"em0_vlan10"}],"query":"em0_vlan10","queryValue":"","skipUrlSync":false,"type":"custom"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"type":"influxdb","uid":"${dataSource}"},"definition":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"interface\")\r\n  |> last()\r\n  |> group(columns: [\"tag\"])\r\n  |> keep(columns: [\"name\"])","hide":0,"includeAll":true,"label":"FW_Interface","multi":true,"name":"iface","options":[],"query":"from(bucket: v.defaultBucket)\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"interface\")\r\n  |> last()\r\n  |> group(columns: [\"tag\"])\r\n  |> keep(columns: [\"name\"])","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"allValue":"*","current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"type":"elasticsearch","uid":"${ESdataSource}"},"definition":"{\"find\": \"terms\", \"field\": \"dst_port\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}","hide":0,"includeAll":true,"label":"FW_Destination Port","multi":true,"name":"dst_port","options":[],"query":"{\"find\": \"terms\", \"field\": \"dst_port\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"allValue":"*","current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":{"type":"elasticsearch","uid":"${ESdataSource}"},"definition":"{\"find\": \"terms\", \"field\": \"src_ip\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}","hide":0,"includeAll":true,"label":"FW_Source IP","multi":true,"name":"src_ip","options":[],"query":"{\"find\": \"terms\", \"field\": \"src_ip\", \"query\": \"interface:$iface\", \"timestamp\": {\n\"timestamp\" : \"now-$__Interval_ms\"\n}}","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"}]},"time":{"from":"now-24h","to":"now"},"timepicker":{"hidden":false,"refresh_intervals":["10s"]},"timezone":"","title":"OPNsense","uid":"suTmk8c7k","version":1,"weekStart":""}
  additionalDataSources:
    - name: Loki
      type: loki
      url: http://loki.loki:3100
    - name: InfluxDB2
      type: influxdb
      access: proxy
      url: https://influxdb2.tribz.cloud
      secureJsonData:
        token: 4iDZfjN4RjHtTPYYipf6zNvUz6Te5eeeuB_Zl0ucAVLMl2giCZ6gpvv3O51Cof-jTmf0HsaO6VM7G3SPNJMNag==
      jsonData:
        version: Flux
        organization: opnsense
        defaultBucket: opnsense
    - name: Elasticsearch
      type: elasticsearch
      access: proxy
      # url: https://elasticsearch.tribz.cloud
      url: "http://elasticsearch-master.elasticsearch.svc.cluster.local:9200"
      database: graylog_7
      jsonData:
        timeField: "timestamp"
        esVersion: "7.17.3"
    - name: InfluxDB
      type: influxdb
      url: https://influxdb.tribz.cloud
      database: graphitedb
  envFromSecret: grafana-secrets
  grafana.ini:
    server:
      root_url: https://grafana.tribz.cloud
    auth.generic_oauth:
      enabled: true
      allow_sign_up: true
      name: Dex
      client_id: grafana-sso
      client_secret: $__env{GRAFANA_SSO_CLIENT_SECRET}
      scopes: openid profile email groups
      auth_url: https://dex.tribz.cloud/auth
      token_url: https://dex.tribz.cloud/token
      api_url: https://dex.tribz.cloud/userinfo
prometheus:
  prometheusSpec:
    enableAdminAPI: true
    ruleSelectorNilUsesHelmValues: false
    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelectorNilUsesHelmValues: false
    probeSelectorNilUsesHelmValues: false
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: freenas-nfs-csi-retain
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 50Gi
    additionalScrapeConfigs:
      - job_name: Windows
        static_configs:
          - targets:
            - 192.168.1.10:9182
      - job_name: dendrite
        static_configs:
          - targets: 
            - matrix-dendrite.matrix.svc.cluster.local:8008
    # - job_name: 'opnsense-telegraf'
    #   static_configs:
    #     - targets: ['opnsense.tribz.cloud:9273']
    # - job_name: 'truenas-graphite-exporter'
    #   static_configs:
    #     - targets: ['dummy-ops-cluster-dummy-master.mysql:9125']
alertmanager:
  config:
    route:
      repeat_interval: 1h
      routes:
        - receiver: "null"
          matchers:
            # - alertname =~ "InfoInhibitor|Watchdog"
            - alertname =~ "InfoInhibitor"
        - receiver: "matrix"
          continue: true
    receivers:
      - name: "null" # Add this to your config as well
      - name: "matrix"
        webhook_configs:
          - url: "http://monitoring-system-matrix-alertmanager.monitoring-system/alerts?secret=veryverysecretkeyhere"
            send_resolved: true
kubeApiServer:
  enabled: true
kubeControllerManager:
  enabled: true
  endpoints:
    - 192.168.1.200
    - 192.168.1.201
    - 192.168.1.202
kubeScheduler:
  enabled: true
  endpoints:
    - 192.168.1.200
    - 192.168.1.201
    - 192.168.1.202
kubeProxy:
  enabled: true
  endpoints:
    - 192.168.1.200
    - 192.168.1.201
    - 192.168.1.202
kubeEtcd:
  enabled: true
  endpoints:
    - 192.168.1.200
    - 192.168.1.201
    - 192.168.1.202
  service:
    enabled: true
    port: 2381
    targetPort: 2381
